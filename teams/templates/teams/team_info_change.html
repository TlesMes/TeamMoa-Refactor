{% extends 'base_app.html' %} 
{% load static %} 

{% block contents %}
<section class="page-section">
  <div class="content-card">
    <div class="card-header">
      <a href="{% url 'teams:team_main_page' team.id %}" class="back-btn">
        <i class="ri-arrow-left-line"></i>
      </a>
      <h2>팀 정보 수정</h2>
      <p>팀 정보를 업데이트하세요</p>
    </div>

    <div class="info-section">
      <div class="team-profile-section">
        <div class="team-avatar">
          <i class="ri-team-fill"></i>
        </div>
        <div class="current-team-info">
          <h3>{{ team.title }}</h3>
          <p class="team-code">팀 코드: {{ team.invitecode|default:"자동 생성됨" }}</p>
          <div class="team-stats">
            <span><i class="ri-group-line"></i> {{ team.currentuser|default:"0" }}/{{ team.maxuser }}명</span>
          </div>
        </div>
      </div>
    </div>
    
    <form method="POST" action="." class="form-container">
      {% csrf_token %}
      <div class="form-group">
        <label for="id_title">팀명</label>
        <div class="input-wrapper">
          <i class="ri-team-line"></i>
          {{ form.title }}
        </div>
        {% if form.title.errors %}
          <div class="field-error">
            {% for error in form.title.errors %}
              <span>{{ error }}</span>
            {% endfor %}
          </div>
        {% endif %}
        <div class="help-text">
          <small>팀명을 변경할 수 있습니다</small>
        </div>
      </div>

      <div class="form-group">
        <label for="id_maxuser">최대 인원수</label>
        <div class="input-wrapper">
          <i class="ri-group-line"></i>
          {{ form.maxuser }}
        </div>
        {% if form.maxuser.errors %}
          <div class="field-error">
            {% for error in form.maxuser.errors %}
              <span>{{ error }}</span>
            {% endfor %}
          </div>
        {% endif %}
        <div class="help-text">
          <small>현재 팀원보다 적게 설정할 수 없습니다</small>
        </div>
      </div>

      <div class="form-group">
        <label for="id_introduction">팀 소개</label>
        <div class="textarea-wrapper">
          <i class="ri-file-text-line"></i>
          {{ form.introduction }}
        </div>
        {% if form.introduction.errors %}
          <div class="field-error">
            {% for error in form.introduction.errors %}
              <span>{{ error }}</span>
            {% endfor %}
          </div>
        {% endif %}
        <div class="help-text">
          <small>팀의 목표나 프로젝트에 대해 설명해주세요</small>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="create-btn">
          <i class="ri-save-line"></i>
          변경사항 저장
        </button>
        <a href="{% url 'teams:team_main_page' team.id %}" class="cancel-btn">
          <i class="ri-close-line"></i>
          취소
        </a>
      </div>
    </form>
  </div>

  {% if messages %}
    <div class="messages-container">
      {% for message in messages %}
        <div class="message message-{{ message.tags }}">
          <i class="ri-information-line"></i>
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
</section>
{% endblock %}
