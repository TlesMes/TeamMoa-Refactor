# Mindmaps ì•± ì „ë©´ ì¬ì„¤ê³„ ê³„íš

## ğŸ“Š í˜„ì¬ ìƒíƒœ ë¶„ì„

### ğŸš¨ ì£¼ìš” ë¬¸ì œì  (ì‚¬ìš©ì„± ì ìˆ˜: 2.0/10)

#### 1. ê¸°ìˆ ì  í•œê³„
- **Canvas ê¸°ë°˜ ìˆ˜ë™ ì¢Œí‘œ ì…ë ¥**: ì‚¬ìš©ìê°€ X, Y ì¢Œí‘œë¥¼ ì§ì ‘ ìˆ«ìë¡œ ì…ë ¥í•´ì•¼ í•¨
- **ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë¶€ì¬**: ë…¸ë“œ ì´ë™ì´ë‚˜ ì—°ê²°ì„ ìœ„í•œ ì‹œê°ì  ì¡°ì‘ ë¶ˆê°€
- **ê³ ì • í¬ê¸°**: 800x600px ê³ ì •ìœ¼ë¡œ í™•ëŒ€/ì¶•ì†Œ ê¸°ëŠ¥ ì—†ìŒ
- **ì›ì‹œì  Canvas API**: ì§ì ‘ì ì¸ 2D ì»¨í…ìŠ¤íŠ¸ ì¡°ì‘ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ì„± ì €í•˜

#### 2. ì‚¬ìš©ì„± ë¬¸ì œ
- **ë¹„ì§ê´€ì  ì¸í„°í˜ì´ìŠ¤**: ë§ˆì¸ë“œë§µ ìƒì„±ì„ ìœ„í•´ ìˆ˜í•™ì  ì¢Œí‘œ ê³„ì‚° í•„ìš”
- **í¸ì§‘ ì œì•½**: ê¸°ì¡´ ë…¸ë“œ ìœ„ì¹˜ ë³€ê²½ì´ë‚˜ í…ìŠ¤íŠ¸ ìˆ˜ì • ë¶ˆê°€
- **í˜‘ì—… í•œê³„**: ì‹¤ì‹œê°„ í˜‘ì—… ê¸°ëŠ¥ ì „ë¬´
- **ëª¨ë°”ì¼ ì§€ì› ë¶€ì¡±**: í„°ì¹˜ ê¸°ë°˜ ì¡°ì‘ ë¶ˆê°€

#### 3. ê¸°ëŠ¥ì  ê²°í•¨
- **ë…¸ë“œ ê´€ê³„ ë³µì¡ì„±**: ë¶€ëª¨ ë…¸ë“œë¥¼ í…ìŠ¤íŠ¸ë¡œ ê²€ìƒ‰í•˜ì—¬ ì—°ê²°
- **ì‹œê°ì  í”¼ë“œë°± ë¶€ì¡±**: ì—°ê²°ì„ ê³¼ ë…¸ë“œì˜ ì‹œê°ì  êµ¬ë¶„ ë¶€ì¡±
- **ì ‘ê·¼ì„± ë¶€ì¡±**: í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜, ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì› ì—†ìŒ

### âœ… í˜„ì¬ ê°•ì 
- **ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì™„ì„±**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬ ì™„ë£Œ (MindmapService)
- **ê¶Œí•œ ê´€ë¦¬ ì²´ê³„**: TeamMemberRequiredMixinìœ¼ë¡œ ì ‘ê·¼ ì œì–´
- **ì¶”ì²œ ì‹œìŠ¤í…œ**: JSON ê¸°ë°˜ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„
- **ëŒ“ê¸€ ì‹œìŠ¤í…œ**: ë…¸ë“œë³„ í˜‘ì—… ê¸°ëŠ¥ ì§€ì›

## ğŸ¯ ì¬ì„¤ê³„ ëª©í‘œ

### 1. í˜„ëŒ€ì  UI/UX êµ¬í˜„
- ì§ê´€ì  ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë…¸ë“œ ì¡°ì‘
- ì‹¤ì‹œê°„ ì‹œê°ì  í”¼ë“œë°±
- ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼ ìµœì í™”)
- ì ‘ê·¼ì„± í‘œì¤€ ì¤€ìˆ˜

### 2. ê³ ê¸‰ ê¸°ëŠ¥ ë„ì…
- ì‹¤ì‹œê°„ í˜‘ì—… ì§€ì›
- ë¬´í•œ ìº”ë²„ìŠ¤ (ì¤Œ/íŒ¬ ê¸°ëŠ¥)
- ë‹¤ì–‘í•œ ë…¸ë“œ íƒ€ì…
- ì‹¤í–‰ì·¨ì†Œ/ë‹¤ì‹œì‹¤í–‰

### 3. ì„±ëŠ¥ ìµœì í™”
- ê°€ìƒí™”ë¥¼ í†µí•œ ëŒ€ê·œëª¨ ë§ˆì¸ë“œë§µ ì§€ì›
- íš¨ìœ¨ì ì¸ ë Œë”ë§ ì—”ì§„
- ìµœì í™”ëœ ë°ì´í„° êµ¬ì¡°

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ ì„ ì •

### í”„ë¡ íŠ¸ì—”ë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ

#### Option 1: React Flow (â˜…â˜…â˜…â˜…â˜… ì¶”ì²œ)
**ì¥ì :**
- ë§ˆì¸ë“œë§µ ì „ìš© ì»´í¬ë„ŒíŠ¸ ìƒíƒœê³„
- ë›°ì–´ë‚œ ì„±ëŠ¥ê³¼ í™•ì¥ì„±
- ì‹¤ì‹œê°„ í˜‘ì—… ì§€ì› ìš©ì´
- í’ë¶€í•œ ë¬¸ì„œí™”ì™€ ì»¤ë®¤ë‹ˆí‹°

**ë‹¨ì :**
- React ì˜ì¡´ì„± (í˜„ì¬ Django í…œí”Œë¦¿ ê¸°ë°˜)
- ì´ˆê¸° í•™ìŠµ ê³¡ì„ 

**ì ìš© ë°©ì•ˆ:**
- íŠ¹ì • í˜ì´ì§€ë§Œ React ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬í˜„
- Django REST APIì™€ ì—°ë™

#### Option 2: D3.js + Custom Implementation (â˜…â˜…â˜…â˜†â˜†)
**ì¥ì :**
- ìµœëŒ€í•œì˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥
- ê¸°ì¡´ Django í…œí”Œë¦¿ê³¼ í˜¸í™˜ì„±

**ë‹¨ì :**
- ë†’ì€ ê°œë°œ ë³µì¡ë„
- ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ ì¦ê°€

#### Option 3: JointJS (â˜…â˜…â˜…â˜…â˜†)
**ì¥ì :**
- ê°•ë ¥í•œ ë‹¤ì´ì–´ê·¸ë¨ ì—”ì§„
- TypeScript ì§€ì›

**ë‹¨ì :**
- ìƒìš© ë¼ì´ì„ ìŠ¤ í•„ìš”
- ë†’ì€ ë¹„ìš©

### ğŸ¯ ì„ ì • ê²°ê³¼: React Flow ê¸°ë°˜ í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ë²•

#### êµ¬í˜„ ì „ëµ
1. **ë§ˆì¸ë“œë§µ ì—ë””í„°ë§Œ React ì»´í¬ë„ŒíŠ¸í™”**
2. **ë‚˜ë¨¸ì§€ í˜ì´ì§€ëŠ” ê¸°ì¡´ Django í…œí”Œë¦¿ ìœ ì§€**
3. **Django REST APIë¡œ ë°ì´í„° ì—°ë™**

## ğŸ—ï¸ ìƒˆë¡œìš´ ì•„í‚¤í…ì²˜ ì„¤ê³„

### 1. ë°ì´í„° ëª¨ë¸ ê°œì„ 

#### ê¸°ì¡´ ëª¨ë¸ ìœ ì§€ + í™•ì¥
```python
class Mindmap(models.Model):
    title = models.CharField(max_length=64)
    team = models.ForeignKey('teams.Team', on_delete=models.CASCADE)
    
    # ìƒˆë¡œìš´ í•„ë“œ ì¶”ê°€
    layout_data = models.JSONField(default=dict, blank=True)  # ë ˆì´ì•„ì›ƒ ì„¤ì •
    zoom_level = models.FloatField(default=1.0)             # ì¤Œ ë ˆë²¨
    center_x = models.FloatField(default=0)                 # ì¤‘ì‹¬ X ì¢Œí‘œ
    center_y = models.FloatField(default=0)                 # ì¤‘ì‹¬ Y ì¢Œí‘œ
    
    updated_by = models.ForeignKey('accounts.User', on_delete=models.SET_NULL, null=True, blank=True)
    updated_at = models.DateTimeField(auto_now=True)

class Node(models.Model):
    # ê¸°ì¡´ í•„ë“œ ìœ ì§€
    posX = models.FloatField()  # int â†’ floatë¡œ ë³€ê²½ (ì •ë°€ë„ í–¥ìƒ)
    posY = models.FloatField()
    title = models.CharField(max_length=64)
    content = models.TextField()
    mindmap = models.ForeignKey('Mindmap', on_delete=models.CASCADE)
    
    # ìƒˆë¡œìš´ í•„ë“œ ì¶”ê°€
    node_type = models.CharField(max_length=20, default='default')  # ë…¸ë“œ íƒ€ì…
    width = models.FloatField(default=100)                         # ë…¸ë“œ ë„ˆë¹„
    height = models.FloatField(default=60)                         # ë…¸ë“œ ë†’ì´
    style_data = models.JSONField(default=dict, blank=True)        # ìŠ¤íƒ€ì¼ ì„¤ì •
    
    # ê¸°ì¡´ ì¶”ì²œ ì‹œìŠ¤í…œ ìœ ì§€
    recommended_users = models.JSONField(default=list, blank=True)
    recommendation_count = models.PositiveIntegerField(default=0)
    
    created_by = models.ForeignKey('accounts.User', on_delete=models.CASCADE)
    created_at = models.DateTimeField(auto_now_add=True)

class NodeConnection(models.Model):
    from_node = models.ForeignKey('Node', related_name='outgoing_connections', on_delete=models.CASCADE)
    to_node = models.ForeignKey('Node', related_name='incoming_connections', on_delete=models.CASCADE)
    mindmap = models.ForeignKey('Mindmap', on_delete=models.CASCADE)
    
    # ìƒˆë¡œìš´ í•„ë“œ ì¶”ê°€
    connection_type = models.CharField(max_length=20, default='default')  # ì—°ê²°ì„  íƒ€ì…
    style_data = models.JSONField(default=dict, blank=True)              # ìŠ¤íƒ€ì¼ ì„¤ì •

# ì‹¤ì‹œê°„ í˜‘ì—…ì„ ìœ„í•œ ìƒˆ ëª¨ë¸
class MindmapSession(models.Model):
    mindmap = models.ForeignKey('Mindmap', on_delete=models.CASCADE)
    user = models.ForeignKey('accounts.User', on_delete=models.CASCADE)
    session_id = models.CharField(max_length=32, unique=True)
    cursor_x = models.FloatField(default=0)
    cursor_y = models.FloatField(default=0)
    is_active = models.BooleanField(default=True)
    last_seen = models.DateTimeField(auto_now=True)
    
    class Meta:
        unique_together = ['mindmap', 'user']
```

### 2. API ë ˆì´ì–´ ì„¤ê³„

#### REST API ì—”ë“œí¬ì¸íŠ¸
```python
# urls.py
api_patterns = [
    path('api/mindmaps/<int:mindmap_id>/', MindmapAPIView.as_view()),
    path('api/mindmaps/<int:mindmap_id>/nodes/', NodeListAPIView.as_view()),
    path('api/mindmaps/<int:mindmap_id>/nodes/<int:node_id>/', NodeDetailAPIView.as_view()),
    path('api/mindmaps/<int:mindmap_id>/connections/', ConnectionListAPIView.as_view()),
    path('api/mindmaps/<int:mindmap_id>/collaborate/', CollaborationAPIView.as_view()),
]
```

#### API ì‘ë‹µ êµ¬ì¡°
```json
{
  "mindmap": {
    "id": 1,
    "title": "í”„ë¡œì íŠ¸ ê³„íš",
    "layout_data": {"algorithm": "tree", "direction": "down"},
    "zoom_level": 1.0,
    "center_x": 0,
    "center_y": 0
  },
  "nodes": [
    {
      "id": 1,
      "posX": 100.5,
      "posY": 200.5,
      "title": "ë©”ì¸ ì•„ì´ë””ì–´",
      "content": "í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ê°œë…",
      "node_type": "root",
      "width": 120,
      "height": 60,
      "style_data": {"backgroundColor": "#4A90E2", "color": "#FFFFFF"},
      "recommendation_count": 3
    }
  ],
  "connections": [
    {
      "id": 1,
      "from_node": 1,
      "to_node": 2,
      "connection_type": "solid",
      "style_data": {"strokeWidth": 2, "color": "#A6B0D0"}
    }
  ],
  "active_users": [
    {
      "user_id": 1,
      "username": "ê¹€ê°œë°œ",
      "cursor_x": 150.0,
      "cursor_y": 250.0
    }
  ]
}
```

### 3. í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

#### React Flow ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸
```javascript
// MindmapEditor.jsx
import React, { useState, useCallback } from 'react';
import ReactFlow, {
  addEdge,
  useNodesState,
  useEdgesState,
  Background,
  Controls,
  MiniMap
} from '@xyflow/react';

const MindmapEditor = ({ mindmapId, teamId }) => {
  const [nodes, setNodes, onNodesChange] = useNodesState([]);
  const [edges, setEdges, onEdgesChange] = useEdgesState([]);

  // ì‹¤ì‹œê°„ í˜‘ì—… í›…
  useRealtimeCollaboration(mindmapId);
  
  // ë“œë˜ê·¸ ì•¤ ë“œë¡­ í•¸ë“¤ëŸ¬
  const onConnect = useCallback((params) => {
    setEdges((eds) => addEdge(params, eds));
  }, []);

  return (
    <div className="mindmap-editor">
      <ReactFlow
        nodes={nodes}
        edges={edges}
        onNodesChange={onNodesChange}
        onEdgesChange={onEdgesChange}
        onConnect={onConnect}
        fitView
      >
        <Background />
        <Controls />
        <MiniMap />
      </ReactFlow>
    </div>
  );
};
```

### 4. ì‹¤ì‹œê°„ í˜‘ì—… ì‹œìŠ¤í…œ

#### WebSocket êµ¬í˜„
```python
# consumers.py
class MindmapConsumer(AsyncWebsocketConsumer):
    async def connect(self):
        self.mindmap_id = self.scope['url_route']['kwargs']['mindmap_id']
        self.room_group_name = f'mindmap_{self.mindmap_id}'

        await self.channel_layer.group_add(
            self.room_group_name,
            self.channel_name
        )
        await self.accept()

    async def receive(self, text_data):
        data = json.loads(text_data)
        
        # ë…¸ë“œ ì´ë™, ìƒì„±, ì‚­ì œ ë“± ì‹¤ì‹œê°„ ë™ê¸°í™”
        await self.channel_layer.group_send(
            self.room_group_name,
            {
                'type': 'mindmap_update',
                'message': data
            }
        )
```

### 5. ì„œë¹„ìŠ¤ ë ˆì´ì–´ í™•ì¥

#### MindmapService ê°œì„ 
```python
class MindmapService:
    # ê¸°ì¡´ ë©”ì„œë“œ ìœ ì§€ + ìƒˆë¡œìš´ ë©”ì„œë“œ ì¶”ê°€
    
    def update_node_position(self, node_id, x, y, user):
        """ì‹¤ì‹œê°„ ë…¸ë“œ ìœ„ì¹˜ ì—…ë°ì´íŠ¸"""
        node = get_object_or_404(Node, pk=node_id)
        node.posX = x
        node.posY = y
        node.save()
        
        # WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ë¸Œë¡œë“œìºìŠ¤íŠ¸
        self._broadcast_update(node.mindmap_id, {
            'type': 'node_moved',
            'node_id': node_id,
            'x': x,
            'y': y,
            'user': user.username
        })
        
        return node
    
    def auto_layout(self, mindmap_id, algorithm='tree'):
        """ìë™ ë ˆì´ì•„ì›ƒ ì ìš©"""
        mindmap = get_object_or_404(Mindmap, pk=mindmap_id)
        nodes = Node.objects.filter(mindmap=mindmap)
        
        if algorithm == 'tree':
            positioned_nodes = self._apply_tree_layout(nodes)
        elif algorithm == 'force':
            positioned_nodes = self._apply_force_layout(nodes)
        
        # ì¼ê´„ ì—…ë°ì´íŠ¸
        Node.objects.bulk_update(positioned_nodes, ['posX', 'posY'])
        
        return positioned_nodes
```

## ğŸš€ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë°˜ êµ¬ì¶• (2-3ì£¼)
- [ ] Django REST Framework ì„¤ì •
- [ ] React Flow í™˜ê²½ êµ¬ì¶•
- [ ] ê¸°ë³¸ CRUD API ê°œë°œ
- [ ] ë‹¨ìˆœí•œ ë§ˆì¸ë“œë§µ ë Œë”ë§ êµ¬í˜„

### Phase 2: í•µì‹¬ ê¸°ëŠ¥ (3-4ì£¼)
- [ ] ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë…¸ë“œ ì´ë™
- [ ] ì‹œê°ì  ì—°ê²°ì„  ê·¸ë¦¬ê¸°
- [ ] ë…¸ë“œ ìƒì„±/í¸ì§‘ ì¸í„°í˜ì´ìŠ¤
- [ ] í™•ëŒ€/ì¶•ì†Œ/íŒ¬ ê¸°ëŠ¥

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (2-3ì£¼)
- [ ] ìë™ ë ˆì´ì•„ì›ƒ ì•Œê³ ë¦¬ì¦˜
- [ ] ë‹¤ì–‘í•œ ë…¸ë“œ íƒ€ì…
- [ ] ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- [ ] í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

### Phase 4: í˜‘ì—… ê¸°ëŠ¥ (3-4ì£¼)
- [ ] WebSocket ì‹¤ì‹œê°„ ë™ê¸°í™”
- [ ] ë©€í‹° ì»¤ì„œ í‘œì‹œ
- [ ] ë³€ê²½ íˆìŠ¤í† ë¦¬ ê´€ë¦¬
- [ ] ì‹¤í–‰ì·¨ì†Œ/ë‹¤ì‹œì‹¤í–‰

### Phase 5: ìµœì í™” ë° ì™„ì„± (2ì£¼)
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ì ‘ê·¼ì„± ê°œì„ 
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜•
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

## ğŸ“Š ì˜ˆìƒ íš¨ê³¼

### ì‚¬ìš©ì„± ê°œì„ 
- **í˜„ì¬ 2.0ì  â†’ ëª©í‘œ 8.5ì ** (325% í–¥ìƒ)
- ì§ê´€ì  ì¡°ì‘ìœ¼ë¡œ ì‚¬ìš©ì í•™ìŠµ ë¹„ìš© 90% ì ˆê°
- ëª¨ë°”ì¼ ì§€ì›ìœ¼ë¡œ ì ‘ê·¼ì„± ëŒ€í­ í–¥ìƒ

### ê¸°ìˆ ì  ì´ì 
- í˜„ëŒ€ì  ê¸°ìˆ  ìŠ¤íƒ ë„ì…
- ì‹¤ì‹œê°„ í˜‘ì—…ìœ¼ë¡œ íŒ€ì›Œí¬ íš¨ìœ¨ì„± ì¦ëŒ€
- í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ êµ¬ì¶•

### ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜
- ì‚¬ìš©ì ê²½í—˜ í˜ì‹ ìœ¼ë¡œ ê²½ìŸë ¥ ê°•í™”
- í˜‘ì—… ë„êµ¬ë¡œì„œì˜ ì‹¤ìš©ì„± ê·¹ëŒ€í™”
- í–¥í›„ ë‹¤ë¥¸ ì•± í˜„ëŒ€í™”ì˜ ëª¨ë²” ì‚¬ë¡€ ì œê³µ

---
*ìµœì¢… ì—…ë°ì´íŠ¸: 2025.09.07*