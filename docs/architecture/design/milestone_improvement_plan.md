# ğŸ¯ TeamMoa ë§ˆì¼ìŠ¤í†¤ ê°œì„  í†µí•© ì„¤ê³„ ê³„íš

> **ëª©í‘œ**: ë§ˆì¼ìŠ¤í†¤-TODO ì—°ë™ + ì§„í–‰ë¥  ê´€ë¦¬ UI + ìˆ˜ì • ëª¨ë‹¬ í†µí•© êµ¬í˜„
> **ì˜ˆìƒ ê¸°ê°„**: 5-7ì¼
> **ë‚œì´ë„**: ğŸŸ¡ ì¤‘ê°„
> **ì‘ì„±ì¼**: 2025-12-25

---

## ğŸ“‹ ëª©ì°¨

1. [ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”](#1-ì „ì²´-ì•„í‚¤í…ì²˜-ê°œìš”)
2. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#2-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
3. [ë°±ì—”ë“œ ì„¤ê³„](#3-ë°±ì—”ë“œ-ì„¤ê³„)
4. [API ì„¤ê³„](#4-api-ì„¤ê³„)
5. [í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„](#5-í”„ë¡ íŠ¸ì—”ë“œ-ì„¤ê³„)
6. [UI/UX ìƒì„¸ ì„¤ê³„](#6-uiux-ìƒì„¸-ì„¤ê³„)
7. [ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ íë¦„](#7-ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§-íë¦„)
8. [í…ŒìŠ¤íŠ¸ ì „ëµ](#8-í…ŒìŠ¤íŠ¸-ì „ëµ)
9. [êµ¬í˜„ ìˆœì„œ ë° ì¼ì •](#9-êµ¬í˜„-ìˆœì„œ-ë°-ì¼ì •)
10. [ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ](#10-ë§ˆì´ê·¸ë ˆì´ì…˜-ê°€ì´ë“œ)

---

## 1. ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”

### 1-1. ì‹œìŠ¤í…œ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í”„ë¡ íŠ¸ì—”ë“œ Layer                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ë§ˆì¼ìŠ¤í†¤ íƒ€ì„ë¼ì¸ í˜ì´ì§€ (ê¸°ì¡´ + ì‹ ê·œ UI)                        â”‚
â”‚     â”œâ”€ ì§„í–‰ë¥  ê´€ë¦¬ UI (ìˆ˜ë™ ìŠ¬ë¼ì´ë” + AUTO ì§„í–‰ ë°”)                â”‚
â”‚     â”œâ”€ ë§ˆì¼ìŠ¤í†¤ ìˆ˜ì • ëª¨ë‹¬ (ì œëª©/ì„¤ëª…/ìš°ì„ ìˆœìœ„/ì§„í–‰ë¥ ëª¨ë“œ)            â”‚
â”‚     â”œâ”€ TODO ì—°ê²° í˜„í™© í‘œì‹œ                                        â”‚
â”‚     â””â”€ ì§„í–‰ë¥  ëª¨ë“œ í† ê¸€ ë²„íŠ¼                                       â”‚
â”‚                                                                   â”‚
â”‚  2. TODO ê´€ë¦¬ í˜ì´ì§€ (ì‹ ê·œ ê¸°ëŠ¥ ì¶”ê°€)                               â”‚
â”‚     â”œâ”€ ë§ˆì¼ìŠ¤í†¤ í• ë‹¹ ë“œë¡­ë‹¤ìš´                                      â”‚
â”‚     â”œâ”€ TODO ì¹´ë“œì— ë§ˆì¼ìŠ¤í†¤ ë°°ì§€ í‘œì‹œ                              â”‚
â”‚     â””â”€ ë§ˆì¼ìŠ¤í†¤ë³„ í•„í„°ë§                                          â”‚
â”‚                                                                   â”‚
â”‚  3. íŒ€ ë©”ì¸ í˜ì´ì§€ (í†µê³„ ê°•í™”)                                      â”‚
â”‚     â”œâ”€ ë§ˆì¼ìŠ¤í†¤ë³„ TODO ì™„ë£Œìœ¨ í‘œì‹œ                                 â”‚
â”‚     â””â”€ ì§„í–‰ë¥  ëª¨ë“œë³„ êµ¬ë¶„ í‘œì‹œ                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         API Layer (DRF)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MilestoneViewSet                  â”‚  TodoViewSet                â”‚
â”‚  â”œâ”€ list                           â”‚  â”œâ”€ list                    â”‚
â”‚  â”œâ”€ create (+ progress_mode)       â”‚  â”œâ”€ create                  â”‚
â”‚  â”œâ”€ retrieve                       â”‚  â”œâ”€ update                  â”‚
â”‚  â”œâ”€ update (ìˆ˜ì • ëª¨ë‹¬ìš©)            â”‚  â”œâ”€ complete (+ ì§„í–‰ë¥  ê°±ì‹ ) â”‚
â”‚  â”œâ”€ partial_update (ë“œë˜ê·¸/ì§„í–‰ë¥ )  â”‚  â””â”€ assign_milestone (ì‹ ê·œ) â”‚
â”‚  â”œâ”€ destroy                        â”‚                             â”‚
â”‚  â”œâ”€ toggle_progress_mode (ì‹ ê·œ)    â”‚                             â”‚
â”‚  â””â”€ todo_stats (ì‹ ê·œ)              â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Service Layer (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MilestoneService                  â”‚  TodoService                â”‚
â”‚  â”œâ”€ create_milestone               â”‚  â”œâ”€ create_todo             â”‚
â”‚  â”œâ”€ update_milestone (í™•ì¥)        â”‚  â”œâ”€ complete_todo (í™•ì¥)    â”‚
â”‚  â”œâ”€ toggle_progress_mode (ì‹ ê·œ)    â”‚  â”œâ”€ assign_to_milestone (ì‹ ê·œ)â”‚
â”‚  â”œâ”€ get_milestone_todo_stats (ì‹ ê·œ)â”‚  â””â”€ get_team_todos_with_statsâ”‚
â”‚  â””â”€ calculate_auto_progress (ì‹ ê·œ) â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         Model Layer (Django ORM)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Milestone                         â”‚  Todo                       â”‚
â”‚  â”œâ”€ progress_mode (ì‹ ê·œ í•„ë“œ)       â”‚  â”œâ”€ milestone (ì‹ ê·œ FK)     â”‚
â”‚  â”œâ”€ calculate_progress_from_todos()â”‚  â””â”€ (ê¸°ì¡´ í•„ë“œë“¤)           â”‚
â”‚  â”œâ”€ update_progress_from_todos()   â”‚                             â”‚
â”‚  â””â”€ get_current_progress()         â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1-2. ì£¼ìš” ê¸°ëŠ¥ ë§µ

| ê¸°ëŠ¥ | í˜„ì¬ ìƒíƒœ | ê°œì„  í›„ |
|------|----------|---------|
| **ì§„í–‰ë¥  ì…ë ¥** | âŒ UI ì—†ìŒ | âœ… ìˆ˜ë™ ìŠ¬ë¼ì´ë” + AUTO ì§„í–‰ ë°” |
| **ë§ˆì¼ìŠ¤í†¤ ìˆ˜ì •** | âŒ ë¶ˆê°€ëŠ¥ (ë‚ ì§œë§Œ ë“œë˜ê·¸) | âœ… ì „ì²´ í•„ë“œ ìˆ˜ì • ëª¨ë‹¬ |
| **TODO ì—°ë™** | âŒ ì—†ìŒ | âœ… ë§ˆì¼ìŠ¤í†¤ì— TODO í• ë‹¹ + ìë™ ì§„í–‰ë¥  |
| **ì§„í–‰ë¥  ê³„ì‚°** | âš ï¸ DB í•„ë“œë§Œ ì¡´ì¬ | âœ… ìˆ˜ë™/ìë™ ëª¨ë“œ ì„ íƒ ê°€ëŠ¥ |
| **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸** | âš ï¸ ë“œë˜ê·¸ë§Œ ê°€ëŠ¥ | âœ… TODO ì™„ë£Œ ì‹œ ì§„í–‰ë¥  ìë™ ê°±ì‹  |

---

## 2. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 2-1. ERD (Entity Relationship Diagram)

```mermaid
erDiagram
    Team ||--o{ Milestone : has
    Team ||--o{ Todo : has
    Milestone ||--o{ Todo : contains
    TeamUser ||--o{ Todo : assigned_to

    Milestone {
        int id PK
        int team_id FK
        string title
        text description
        date startdate
        date enddate
        string priority
        boolean is_completed
        datetime completed_date
        string progress_mode "NEW: manual/auto"
        int progress_percentage
    }

    Todo {
        int id PK
        int team_id FK
        int assignee_id FK
        int milestone_id FK "NEW"
        text content
        boolean is_completed
        datetime completed_at
        int order
        datetime created_at
    }
```

### 2-2. Milestone ëª¨ë¸ í™•ì¥

**íŒŒì¼**: `teams/models.py`

```python
from django.db import models
from django.utils import timezone

class Milestone(models.Model):
    """
    ë§ˆì¼ìŠ¤í†¤ ëª¨ë¸

    ë³€ê²½ì‚¬í•­ (ì‹ ê·œ):
    - progress_mode: ì§„í–‰ë¥  ê³„ì‚° ë°©ì‹ ì„ íƒ (manual/auto)
    - calculate_progress_from_todos(): TODO ê¸°ë°˜ ì§„í–‰ë¥  ê³„ì‚°
    - update_progress_from_todos(): ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸
    - get_current_progress(): ëª¨ë“œì— ë”°ë¥¸ ì§„í–‰ë¥  ë°˜í™˜
    """

    team = models.ForeignKey('Team', on_delete=models.CASCADE)
    title = models.CharField(max_length=100)
    description = models.TextField(blank=True)
    startdate = models.DateField()
    enddate = models.DateField()
    is_completed = models.BooleanField(default=False)
    completed_date = models.DateTimeField(null=True, blank=True)

    # â­ ì‹ ê·œ í•„ë“œ: ì§„í–‰ë¥  ê³„ì‚° ë°©ì‹
    progress_mode = models.CharField(
        max_length=20,
        choices=[
            ('manual', 'ìˆ˜ë™ ì…ë ¥'),
            ('auto', 'TODO ê¸°ë°˜ ìë™ ê³„ì‚°')
        ],
        default='manual',
        help_text='ì§„í–‰ë¥  ê³„ì‚° ë°©ì‹ ì„ íƒ'
    )

    progress_percentage = models.IntegerField(
        default=0,
        help_text='manual ëª¨ë“œ: ì§ì ‘ ì…ë ¥, auto ëª¨ë“œ: TODO ì™„ë£Œìœ¨ë¡œ ìë™ ê³„ì‚°'
    )

    priority = models.CharField(max_length=20, choices=[
        ('critical', 'ìµœìš°ì„ '),
        ('high', 'ì¤‘ìš”'),
        ('medium', 'ë³´í†µ'),
        ('low', 'ë‚®ìŒ'),
        ('minimal', 'ë¯¸ë¯¸')
    ], default='medium')

    class Meta:
        ordering = ['-priority', 'enddate']

    def __str__(self):
        return self.title

    # â­ ì‹ ê·œ ë©”ì„œë“œ: TODO ê¸°ë°˜ ì§„í–‰ë¥  ê³„ì‚°
    def calculate_progress_from_todos(self):
        """
        ì—°ê²°ëœ TODOë“¤ì˜ ì™„ë£Œìœ¨ë¡œ ì§„í–‰ë¥  ê³„ì‚°

        Returns:
            int: ê³„ì‚°ëœ ì§„í–‰ë¥  (0-100)
        """
        total_todos = self.todos.count()
        if total_todos == 0:
            return 0

        completed_todos = self.todos.filter(is_completed=True).count()
        return int((completed_todos / total_todos) * 100)

    # â­ ì‹ ê·œ ë©”ì„œë“œ: ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸
    def update_progress_from_todos(self):
        """
        AUTO ëª¨ë“œì¼ ë•Œ TODO ì™„ë£Œìœ¨ë¡œ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        100% ë„ë‹¬ ì‹œ ìë™ ì™„ë£Œ ì²˜ë¦¬

        Returns:
            tuple: (ì´ì „ ì§„í–‰ë¥ , ìƒˆ ì§„í–‰ë¥ )
        """
        if self.progress_mode != 'auto':
            return None, None

        old_progress = self.progress_percentage
        new_progress = self.calculate_progress_from_todos()

        # ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        self.progress_percentage = new_progress

        # 100% ë„ë‹¬ ì‹œ ìë™ ì™„ë£Œ
        if new_progress == 100 and not self.is_completed:
            self.is_completed = True
            self.completed_date = timezone.now()
        # 100% ë¯¸ë§Œìœ¼ë¡œ ë–¨ì–´ì§€ë©´ ì™„ë£Œ í•´ì œ
        elif new_progress < 100 and self.is_completed:
            self.is_completed = False
            self.completed_date = None

        self.save()

        return old_progress, new_progress

    # â­ ì‹ ê·œ ë©”ì„œë“œ: í˜„ì¬ ì§„í–‰ë¥  ë°˜í™˜
    def get_current_progress(self):
        """
        ì§„í–‰ë¥  ëª¨ë“œì— ë”°ë¼ ì‹¤ì œ ì§„í–‰ë¥  ë°˜í™˜

        Returns:
            int: í˜„ì¬ ì§„í–‰ë¥  (0-100)
        """
        if self.progress_mode == 'auto':
            return self.calculate_progress_from_todos()
        else:
            return self.progress_percentage

    # â­ ì‹ ê·œ ë©”ì„œë“œ: TODO í†µê³„
    def get_todo_stats(self):
        """
        ì—°ê²°ëœ TODO í†µê³„ ë°˜í™˜

        Returns:
            dict: {total, completed, in_progress}
        """
        total = self.todos.count()
        completed = self.todos.filter(is_completed=True).count()

        return {
            'total': total,
            'completed': completed,
            'in_progress': total - completed
        }

    # ê¸°ì¡´ ë©”ì„œë“œ (ìˆ˜ì •)
    def get_status(self, today_date=None):
        """ë§ˆì¼ìŠ¤í†¤ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë°˜í™˜ (ë‚ ì§œ + ì§„í–‰ë¥  ê¸°ì¤€)"""
        if today_date is None:
            from datetime import date
            today_date = date.today()

        # 100% ì™„ë£Œëœ ê²½ìš°
        if self.get_current_progress() >= 100:
            return 'completed'

        # ì•„ì§ ì‹œì‘ ì „
        if today_date < self.startdate:
            return 'not_started'

        # ì¢…ë£Œì¼ì´ ì§€ë‚¬ì§€ë§Œ 100% ë¯¸ì™„ë£Œ
        if today_date > self.enddate:
            return 'overdue'

        # ì§„í–‰ ê¸°ê°„ ë‚´ì— ìˆê³  ì§„í–‰ ì¤‘
        return 'in_progress'
```

### 2-3. Todo ëª¨ë¸ í™•ì¥

**íŒŒì¼**: `members/models.py`

```python
from django.db import models

class Todo(models.Model):
    """
    TODO ëª¨ë¸

    ë³€ê²½ì‚¬í•­ (ì‹ ê·œ):
    - milestone: ë§ˆì¼ìŠ¤í†¤ ì—°ê²° (FK)
    - save() ì˜¤ë²„ë¼ì´ë“œ: ì™„ë£Œ ìƒíƒœ ë³€ê²½ ì‹œ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸
    """

    content = models.TextField(default="", null=True, blank=True)
    is_completed = models.BooleanField(default=False)

    assignee = models.ForeignKey(
        'teams.TeamUser',
        on_delete=models.SET_NULL,
        null=True,
        blank=True,
        related_name='todo_set',
        help_text='TODO ë‹´ë‹¹ì (íƒˆí‡´ ì‹œ NULL, ë¯¸í• ë‹¹ ìƒíƒœë¡œ ë³€ê²½)'
    )

    team = models.ForeignKey('teams.Team', on_delete=models.CASCADE, default=1)

    # â­ ì‹ ê·œ í•„ë“œ: ë§ˆì¼ìŠ¤í†¤ ì—°ê²°
    milestone = models.ForeignKey(
        'teams.Milestone',
        on_delete=models.SET_NULL,  # ë§ˆì¼ìŠ¤í†¤ ì‚­ì œ ì‹œ TODOëŠ” ìœ ì§€ (ì—°ê²°ë§Œ í•´ì œ)
        null=True,
        blank=True,
        related_name='todos',
        help_text='ì´ TODOê°€ ì†í•œ ë§ˆì¼ìŠ¤í†¤ (ì„ íƒì‚¬í•­)'
    )

    order = models.PositiveIntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True, null=True)
    completed_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        ordering = ['order', 'created_at']

    def __str__(self):
        return self.content

    # â­ ì‹ ê·œ ë©”ì„œë“œ: ì™„ë£Œ ì‹œ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°
    def save(self, *args, **kwargs):
        """
        ì €ì¥ ì‹œ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸
        (is_completed ë³€ê²½ ì‹œì—ë§Œ)
        """
        # ê¸°ì¡´ ê°ì²´ì¸ ê²½ìš° ì´ì „ ì™„ë£Œ ìƒíƒœ í™•ì¸
        old_is_completed = None
        if self.pk:
            try:
                old_obj = Todo.objects.get(pk=self.pk)
                old_is_completed = old_obj.is_completed
            except Todo.DoesNotExist:
                pass

        # ì €ì¥ ì‹¤í–‰
        super().save(*args, **kwargs)

        # ì™„ë£Œ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆê³ , ë§ˆì¼ìŠ¤í†¤ì´ AUTO ëª¨ë“œì¸ ê²½ìš° ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        if (old_is_completed is not None and
            old_is_completed != self.is_completed and
            self.milestone and
            self.milestone.progress_mode == 'auto'):
            self.milestone.update_progress_from_todos()
```

### 2-4. ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼

**íŒŒì¼**: `teams/migrations/0007_add_progress_mode_to_milestone.py`

```python
from django.db import migrations, models

class Migration(migrations.Migration):

    dependencies = [
        ('teams', '0006_alter_team_host'),
    ]

    operations = [
        migrations.AddField(
            model_name='milestone',
            name='progress_mode',
            field=models.CharField(
                choices=[('manual', 'ìˆ˜ë™ ì…ë ¥'), ('auto', 'TODO ê¸°ë°˜ ìë™ ê³„ì‚°')],
                default='manual',
                help_text='ì§„í–‰ë¥  ê³„ì‚° ë°©ì‹ ì„ íƒ',
                max_length=20
            ),
        ),
    ]
```

**íŒŒì¼**: `members/migrations/0006_add_milestone_to_todo.py`

```python
from django.db import migrations, models
import django.db.models.deletion

class Migration(migrations.Migration):

    dependencies = [
        ('members', '0005_alter_todo_assignee'),
        ('teams', '0007_add_progress_mode_to_milestone'),
    ]

    operations = [
        migrations.AddField(
            model_name='todo',
            name='milestone',
            field=models.ForeignKey(
                blank=True,
                help_text='ì´ TODOê°€ ì†í•œ ë§ˆì¼ìŠ¤í†¤ (ì„ íƒì‚¬í•­)',
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name='todos',
                to='teams.milestone'
            ),
        ),
    ]
```

---

## 3. ë°±ì—”ë“œ ì„¤ê³„

### 3-1. MilestoneService í™•ì¥

**íŒŒì¼**: `teams/services.py`

ì£¼ìš” ì¶”ê°€/ìˆ˜ì • ë©”ì„œë“œ:

1. **`create_milestone()`** - `progress_mode` íŒŒë¼ë¯¸í„° ì¶”ê°€
2. **`update_milestone()`** - ì œëª©, ì„¤ëª…, ìš°ì„ ìˆœìœ„, ì§„í–‰ë¥  ëª¨ë“œ ìˆ˜ì • ì§€ì› í™•ì¥
3. **`toggle_progress_mode()`** - ì§„í–‰ë¥  ëª¨ë“œ ì „í™˜ (manual â†” auto)
4. **`get_milestone_todo_stats()`** - TODO í†µê³„ ì¡°íšŒ

```python
class MilestoneService:
    """ë§ˆì¼ìŠ¤í†¤ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§"""

    def create_milestone(self, team, title, description, startdate, enddate,
                        priority, progress_mode='manual'):
        """
        ìƒˆ ë§ˆì¼ìŠ¤í†¤ ìƒì„±

        Args:
            progress_mode: 'manual' ë˜ëŠ” 'auto'
        """
        self._validate_milestone_dates(startdate, enddate)

        if not title or not title.strip():
            raise ValueError('ë§ˆì¼ìŠ¤í†¤ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')

        milestone = Milestone.objects.create(
            team=team,
            title=title.strip(),
            description=description,
            startdate=startdate,
            enddate=enddate,
            priority=priority,
            progress_mode=progress_mode  # â­ ì‹ ê·œ
        )

        return milestone

    @transaction.atomic
    def update_milestone(self, milestone_id, team, **update_data):
        """
        ë§ˆì¼ìŠ¤í†¤ ì—…ë°ì´íŠ¸

        ì§€ì› í•„ë“œ:
        - title, description, priority (â­ ì‹ ê·œ)
        - startdate, enddate
        - progress_mode (â­ ì‹ ê·œ)
        - progress_percentage (manual ëª¨ë“œì¼ ë•Œë§Œ)
        """
        milestone = get_object_or_404(Milestone, pk=milestone_id, team=team)
        updated_fields = []

        # â­ ì œëª© ì—…ë°ì´íŠ¸
        if 'title' in update_data:
            title = update_data['title'].strip()
            if not title:
                raise ValueError('ë§ˆì¼ìŠ¤í†¤ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
            milestone.title = title
            updated_fields.append('ì œëª©')

        # â­ ì„¤ëª… ì—…ë°ì´íŠ¸
        if 'description' in update_data:
            milestone.description = update_data['description']
            updated_fields.append('ì„¤ëª…')

        # â­ ìš°ì„ ìˆœìœ„ ì—…ë°ì´íŠ¸
        if 'priority' in update_data:
            priority = update_data['priority']
            valid_priorities = ['critical', 'high', 'medium', 'low', 'minimal']
            if priority not in valid_priorities:
                raise ValueError(f'ìœ íš¨í•˜ì§€ ì•Šì€ ìš°ì„ ìˆœìœ„: {priority}')
            milestone.priority = priority
            updated_fields.append('ìš°ì„ ìˆœìœ„')

        # ë‚ ì§œ ì—…ë°ì´íŠ¸ (ê¸°ì¡´)
        if 'startdate' in update_data:
            milestone.startdate = self._parse_date(update_data['startdate'])
            updated_fields.append('ì‹œì‘ì¼')

        if 'enddate' in update_data:
            milestone.enddate = self._parse_date(update_data['enddate'])
            updated_fields.append('ì¢…ë£Œì¼')

        # ë‚ ì§œ ê²€ì¦
        if hasattr(milestone, 'startdate') and hasattr(milestone, 'enddate'):
            if milestone.startdate > milestone.enddate:
                raise ValueError('ì‹œì‘ì¼ì€ ì¢…ë£Œì¼ë³´ë‹¤ ì´ì „ì´ì–´ì•¼ í•©ë‹ˆë‹¤.')

        # â­ ì§„í–‰ë¥  ëª¨ë“œ ì—…ë°ì´íŠ¸
        if 'progress_mode' in update_data:
            new_mode = update_data['progress_mode']
            if new_mode not in ['manual', 'auto']:
                raise ValueError('ìœ íš¨í•˜ì§€ ì•Šì€ ì§„í–‰ë¥  ëª¨ë“œì…ë‹ˆë‹¤.')

            old_mode = milestone.progress_mode
            milestone.progress_mode = new_mode

            # AUTOë¡œ ì „í™˜ ì‹œ ì¦‰ì‹œ ì§„í–‰ë¥  ì¬ê³„ì‚°
            if new_mode == 'auto' and old_mode == 'manual':
                milestone.update_progress_from_todos()

            updated_fields.append('ì§„í–‰ë¥  ëª¨ë“œ')

        # ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (manual ëª¨ë“œì¼ ë•Œë§Œ)
        if 'progress_percentage' in update_data:
            if milestone.progress_mode == 'auto':
                raise ValueError('AUTO ëª¨ë“œì—ì„œëŠ” ì§„í–‰ë¥ ì„ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')

            progress = int(update_data['progress_percentage'])
            if not (0 <= progress <= 100):
                raise ValueError('ì§„í–‰ë¥ ì€ 0-100 ì‚¬ì´ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.')

            milestone.progress_percentage = progress
            updated_fields.append('ì§„í–‰ë¥ ')

            # ì™„ë£Œ ìƒíƒœ ìë™ ì—…ë°ì´íŠ¸
            if progress == 100 and not milestone.is_completed:
                milestone.is_completed = True
                milestone.completed_date = datetime.now()
                updated_fields.append('ì™„ë£Œ ìƒíƒœ')
            elif progress < 100 and milestone.is_completed:
                milestone.is_completed = False
                milestone.completed_date = None
                updated_fields.append('ì™„ë£Œ ìƒíƒœ')

        milestone.save()
        return milestone, updated_fields

    @transaction.atomic
    def toggle_progress_mode(self, milestone_id, team):
        """
        ì§„í–‰ë¥  ëª¨ë“œ ì „í™˜ (manual â†” auto)

        Returns:
            tuple: (Milestone, ìƒˆ ëª¨ë“œ, ìƒˆ ì§„í–‰ë¥ )
        """
        milestone = get_object_or_404(Milestone, pk=milestone_id, team=team)

        if milestone.progress_mode == 'manual':
            milestone.progress_mode = 'auto'
            milestone.update_progress_from_todos()
        else:
            milestone.progress_mode = 'manual'

        milestone.save()

        return milestone, milestone.progress_mode, milestone.get_current_progress()

    def get_milestone_todo_stats(self, milestone):
        """TODO í†µê³„ ë°˜í™˜"""
        return milestone.get_todo_stats()
```

### 3-2. TodoService í™•ì¥

**íŒŒì¼**: `members/services.py`

ì£¼ìš” ì¶”ê°€/ìˆ˜ì • ë©”ì„œë“œ:

1. **`complete_todo()`** - ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸ ë¡œì§ ì¶”ê°€
2. **`assign_to_milestone()`** - TODOë¥¼ ë§ˆì¼ìŠ¤í†¤ì— í• ë‹¹
3. **`create_todo()`** - `milestone_id` íŒŒë¼ë¯¸í„° ì¶”ê°€

```python
class TodoService:
    """TODO ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§"""

    @transaction.atomic
    def complete_todo(self, todo_id, team, requester):
        """
        TODO ì™„ë£Œ ìƒíƒœ í† ê¸€ + ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸

        Returns:
            dict: {
                'todo': Todo ê°ì²´,
                'is_completed': ì™„ë£Œ ì—¬ë¶€,
                'milestone_updated': ë§ˆì¼ìŠ¤í†¤ ì—…ë°ì´íŠ¸ ì—¬ë¶€,
                'milestone_progress': ìƒˆ ì§„í–‰ë¥ ,
                'milestone_completed': ë§ˆì¼ìŠ¤í†¤ ì™„ë£Œ ì—¬ë¶€
            }
        """
        todo = get_object_or_404(Todo, pk=todo_id, team=team)
        current_teamuser = self._get_current_teamuser(team, requester)

        # ê¶Œí•œ ê²€ì¦
        if not (self._is_team_host(team, requester) or
                todo.assignee == current_teamuser):
            raise ValueError(self.ERROR_MESSAGES['NO_PERMISSION'])

        # ì™„ë£Œ ìƒíƒœ í† ê¸€
        todo.is_completed = not todo.is_completed
        todo.completed_at = timezone.now() if todo.is_completed else None

        # â­ save() ë©”ì„œë“œê°€ ìë™ìœ¼ë¡œ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        todo.save()

        # ë§ˆì¼ìŠ¤í†¤ ì •ë³´ ìˆ˜ì§‘
        milestone_updated = False
        milestone_progress = None
        milestone_completed = False

        if todo.milestone and todo.milestone.progress_mode == 'auto':
            milestone_updated = True
            milestone_progress = todo.milestone.get_current_progress()
            milestone_completed = todo.milestone.is_completed

        return {
            'todo': todo,
            'is_completed': todo.is_completed,
            'milestone_updated': milestone_updated,
            'milestone_progress': milestone_progress,
            'milestone_completed': milestone_completed
        }

    @transaction.atomic
    def assign_to_milestone(self, todo_id, milestone_id, team):
        """
        TODOë¥¼ ë§ˆì¼ìŠ¤í†¤ì— í• ë‹¹

        Args:
            milestone_id: Milestone ID (Noneì´ë©´ ì—°ê²° í•´ì œ)

        Returns:
            dict: {
                'todo': Todo ê°ì²´,
                'old_milestone': ì´ì „ ë§ˆì¼ìŠ¤í†¤,
                'new_milestone': ìƒˆ ë§ˆì¼ìŠ¤í†¤,
                'old_milestone_progress': ì´ì „ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥ ,
                'new_milestone_progress': ìƒˆ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥ 
            }
        """
        from teams.models import Milestone

        todo = get_object_or_404(Todo, pk=todo_id, team=team)

        old_milestone = todo.milestone
        old_milestone_progress = None
        new_milestone_progress = None

        # ìƒˆ ë§ˆì¼ìŠ¤í†¤ í• ë‹¹
        if milestone_id:
            new_milestone = get_object_or_404(Milestone, pk=milestone_id, team=team)
            todo.milestone = new_milestone
        else:
            todo.milestone = None

        todo.save()

        # ì´ì „ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (AUTO ëª¨ë“œ)
        if old_milestone and old_milestone.progress_mode == 'auto':
            old_milestone.update_progress_from_todos()
            old_milestone_progress = old_milestone.get_current_progress()

        # ìƒˆ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (AUTO ëª¨ë“œ)
        if todo.milestone and todo.milestone.progress_mode == 'auto':
            todo.milestone.update_progress_from_todos()
            new_milestone_progress = todo.milestone.get_current_progress()

        return {
            'todo': todo,
            'old_milestone': old_milestone,
            'new_milestone': todo.milestone,
            'old_milestone_progress': old_milestone_progress,
            'new_milestone_progress': new_milestone_progress
        }
```

---

## 4. API ì„¤ê³„

### 4-1. Serializers

**íŒŒì¼**: `teams/serializers.py`

```python
from rest_framework import serializers
from .models import Milestone

class MilestoneSerializer(serializers.ModelSerializer):
    """ë§ˆì¼ìŠ¤í†¤ ì¡°íšŒìš©"""

    status = serializers.SerializerMethodField()
    status_display = serializers.SerializerMethodField()
    priority_display = serializers.CharField(source='get_priority_display', read_only=True)
    current_progress = serializers.SerializerMethodField()  # â­ ì‹ ê·œ
    todo_stats = serializers.SerializerMethodField()  # â­ ì‹ ê·œ

    class Meta:
        model = Milestone
        fields = [
            'id', 'team', 'title', 'description',
            'startdate', 'enddate', 'priority', 'priority_display',
            'progress_mode',  # â­ ì‹ ê·œ
            'progress_percentage',
            'current_progress',  # â­ ì‹ ê·œ
            'is_completed', 'completed_date',
            'status', 'status_display',
            'todo_stats'  # â­ ì‹ ê·œ
        ]
        read_only_fields = ['id', 'team', 'is_completed', 'completed_date']

    def get_status(self, obj):
        return obj.get_status()

    def get_status_display(self, obj):
        return obj.status_display

    def get_current_progress(self, obj):
        return obj.get_current_progress()

    def get_todo_stats(self, obj):
        return obj.get_todo_stats()


class MilestoneCreateSerializer(serializers.ModelSerializer):
    """ë§ˆì¼ìŠ¤í†¤ ìƒì„±ìš©"""

    class Meta:
        model = Milestone
        fields = [
            'title', 'description',
            'startdate', 'enddate',
            'priority',
            'progress_mode'  # â­ ì‹ ê·œ
        ]

    def validate_title(self, value):
        if not value or not value.strip():
            raise serializers.ValidationError('ë§ˆì¼ìŠ¤í†¤ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
        return value.strip()

    def validate(self, data):
        if data.get('startdate') and data.get('enddate'):
            if data['startdate'] > data['enddate']:
                raise serializers.ValidationError({
                    'enddate': 'ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.'
                })
        return data


class MilestoneUpdateSerializer(serializers.ModelSerializer):
    """ë§ˆì¼ìŠ¤í†¤ ì—…ë°ì´íŠ¸ìš©"""

    class Meta:
        model = Milestone
        fields = [
            'title',  # â­ ì‹ ê·œ
            'description',  # â­ ì‹ ê·œ
            'priority',  # â­ ì‹ ê·œ
            'startdate',
            'enddate',
            'progress_mode',  # â­ ì‹ ê·œ
            'progress_percentage'
        ]

    def validate_progress_percentage(self, value):
        if value is not None and not (0 <= value <= 100):
            raise serializers.ValidationError('ì§„í–‰ë¥ ì€ 0-100 ì‚¬ì´ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.')
        return value

    def validate(self, data):
        instance = self.instance

        # ë‚ ì§œ ê²€ì¦
        startdate = data.get('startdate', instance.startdate if instance else None)
        enddate = data.get('enddate', instance.enddate if instance else None)

        if startdate and enddate and startdate > enddate:
            raise serializers.ValidationError({
                'enddate': 'ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.'
            })

        # AUTO ëª¨ë“œì—ì„œ ìˆ˜ë™ ì§„í–‰ë¥  ì…ë ¥ ë°©ì§€
        progress_mode = data.get('progress_mode', instance.progress_mode if instance else 'manual')
        if progress_mode == 'auto' and 'progress_percentage' in data:
            raise serializers.ValidationError({
                'progress_percentage': 'AUTO ëª¨ë“œì—ì„œëŠ” ì§„í–‰ë¥ ì„ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
            })

        return data
```

**íŒŒì¼**: `members/serializers.py`

```python
from rest_framework import serializers
from .models import Todo
from teams.models import Milestone

class TodoSerializer(serializers.ModelSerializer):
    """TODO ì¡°íšŒìš©"""

    milestone_info = serializers.SerializerMethodField()  # â­ ì‹ ê·œ

    class Meta:
        model = Todo
        fields = [
            'id', 'content', 'is_completed',
            'assignee', 'team', 'order',
            'created_at', 'completed_at',
            'milestone',  # â­ ì‹ ê·œ
            'milestone_info'  # â­ ì‹ ê·œ
        ]
        read_only_fields = ['id', 'created_at', 'completed_at']

    def get_milestone_info(self, obj):
        if obj.milestone:
            return {
                'id': obj.milestone.id,
                'title': obj.milestone.title,
                'priority': obj.milestone.priority
            }
        return None


class TodoCreateSerializer(serializers.ModelSerializer):
    """TODO ìƒì„±ìš©"""

    milestone = serializers.PrimaryKeyRelatedField(
        queryset=Milestone.objects.all(),
        required=False,
        allow_null=True
    )  # â­ ì‹ ê·œ

    class Meta:
        model = Todo
        fields = ['content', 'milestone']

    def validate_content(self, value):
        if not value or not value.strip():
            raise serializers.ValidationError('í•  ì¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
        return value.strip()
```

### 4-2. API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

**Milestone API**:

| Method | URL | ì•¡ì…˜ | ì„¤ëª… |
|--------|-----|------|------|
| `GET` | `/api/v1/teams/{team_pk}/milestones/` | `list` | ë§ˆì¼ìŠ¤í†¤ ëª©ë¡ ì¡°íšŒ |
| `POST` | `/api/v1/teams/{team_pk}/milestones/` | `create` | ë§ˆì¼ìŠ¤í†¤ ìƒì„± (progress_mode í¬í•¨) |
| `GET` | `/api/v1/teams/{team_pk}/milestones/{id}/` | `retrieve` | ë§ˆì¼ìŠ¤í†¤ ìƒì„¸ ì¡°íšŒ |
| `PUT` | `/api/v1/teams/{team_pk}/milestones/{id}/` | `update` | â­ ì „ì²´ ìˆ˜ì • (ëª¨ë‹¬ìš©) |
| `PATCH` | `/api/v1/teams/{team_pk}/milestones/{id}/` | `partial_update` | ë¶€ë¶„ ìˆ˜ì • (ë“œë˜ê·¸/ìŠ¬ë¼ì´ë”) |
| `DELETE` | `/api/v1/teams/{team_pk}/milestones/{id}/` | `destroy` | ë§ˆì¼ìŠ¤í†¤ ì‚­ì œ |
| `POST` | `/api/v1/teams/{team_pk}/milestones/{id}/toggle-progress-mode/` | â­ `toggle_progress_mode` | ì§„í–‰ë¥  ëª¨ë“œ ì „í™˜ |
| `GET` | `/api/v1/teams/{team_pk}/milestones/{id}/todo-stats/` | â­ `todo_stats` | TODO í†µê³„ ì¡°íšŒ |

**TODO API**:

| Method | URL | ì•¡ì…˜ | ì„¤ëª… |
|--------|-----|------|------|
| `PATCH` | `/api/v1/teams/{team_pk}/todos/{id}/assign-milestone/` | â­ `assign_milestone` | ë§ˆì¼ìŠ¤í†¤ í• ë‹¹ |
| `POST` | `/api/v1/teams/{team_pk}/todos/{id}/complete/` | `complete` | ì™„ë£Œ í† ê¸€ (ì§„í–‰ë¥  ìë™ ê°±ì‹ ) |

---

## 5. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„

### 5-1. JavaScript API Client

**íŒŒì¼**: `static/js/api/client.js`

```javascript
class TeamApiClient {
    constructor() {
        this.baseUrl = '/api/v1';
    }

    // ========================================
    // Milestone API
    // ========================================

    /**
     * â­ ë§ˆì¼ìŠ¤í†¤ ì „ì²´ ìˆ˜ì • (PUT) - ìˆ˜ì • ëª¨ë‹¬ìš©
     */
    async updateMilestoneFull(teamId, milestoneId, data) {
        const response = await fetch(`${this.baseUrl}/teams/${teamId}/milestones/${milestoneId}/`, {
            method: 'PUT',
            headers: this._getHeaders(),
            body: JSON.stringify(data)
        });
        return await this._handleResponse(response);
    }

    /**
     * ë§ˆì¼ìŠ¤í†¤ ë¶€ë¶„ ìˆ˜ì • (PATCH) - ë“œë˜ê·¸/ì§„í–‰ë¥ ìš©
     */
    async updateMilestone(teamId, milestoneId, data) {
        const response = await fetch(`${this.baseUrl}/teams/${teamId}/milestones/${milestoneId}/`, {
            method: 'PATCH',
            headers: this._getHeaders(),
            body: JSON.stringify(data)
        });
        return await this._handleResponse(response);
    }

    /**
     * â­ ì§„í–‰ë¥  ëª¨ë“œ í† ê¸€
     */
    async toggleMilestoneProgressMode(teamId, milestoneId) {
        const response = await fetch(`${this.baseUrl}/teams/${teamId}/milestones/${milestoneId}/toggle-progress-mode/`, {
            method: 'POST',
            headers: this._getHeaders()
        });
        return await this._handleResponse(response);
    }

    /**
     * â­ TODOë¥¼ ë§ˆì¼ìŠ¤í†¤ì— í• ë‹¹
     */
    async assignTodoToMilestone(teamId, todoId, milestoneId) {
        const response = await fetch(`${this.baseUrl}/teams/${teamId}/todos/${todoId}/assign-milestone/`, {
            method: 'PATCH',
            headers: this._getHeaders(),
            body: JSON.stringify({ milestone_id: milestoneId })
        });
        return await this._handleResponse(response);
    }

    // í—¬í¼ ë©”ì„œë“œ
    _getHeaders() {
        return {
            'Content-Type': 'application/json',
            'X-CSRFToken': this._getCsrfToken()
        };
    }

    _getCsrfToken() {
        return document.querySelector('[name=csrfmiddlewaretoken]').value;
    }

    async _handleResponse(response) {
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.error || 'API ìš”ì²­ ì‹¤íŒ¨');
        }
        return data;
    }
}

window.teamApi = new TeamApiClient();
```

### 5-2. ì§„í–‰ë¥  ìŠ¬ë¼ì´ë” ì»´í¬ë„ŒíŠ¸

**íŒŒì¼**: `static/js/components/progress-control.js`

```javascript
/**
 * ì§„í–‰ë¥  ìŠ¬ë¼ì´ë” ì»´í¬ë„ŒíŠ¸
 * - ìˆ˜ë™ ëª¨ë“œ: ìŠ¬ë¼ì´ë”ë¡œ ì§„í–‰ë¥  ì¡°ì •
 * - AUTO ëª¨ë“œ: ì½ê¸° ì „ìš© ì§„í–‰ ë°”
 */

document.addEventListener('DOMContentLoaded', () => {
    // ì§„í–‰ë¥  ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ (ìˆ˜ë™ ëª¨ë“œ)
    document.querySelectorAll('.progress-slider').forEach(slider => {
        let debounceTimer;

        slider.addEventListener('input', (e) => {
            // ì‹¤ì‹œê°„ ë¼ë²¨ ì—…ë°ì´íŠ¸
            const milestoneId = e.target.dataset.milestoneId;
            const value = e.target.value;
            const label = e.target.nextElementSibling;

            if (label) {
                label.textContent = `${value}%`;
            }
        });

        slider.addEventListener('change', async (e) => {
            const milestoneId = e.target.dataset.milestoneId;
            const progress = parseInt(e.target.value);

            // ë””ë°”ìš´ìŠ¤ (ì—°ì† ë³€ê²½ ë°©ì§€)
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(async () => {
                try {
                    const response = await window.teamApi.updateMilestone(
                        window.teamData.id,
                        milestoneId,
                        { progress_percentage: progress }
                    );

                    if (response.success) {
                        showDjangoToast(response.message, 'success');

                        // 100% ë„ë‹¬ ì‹œ ì¶•í•˜ íš¨ê³¼
                        if (progress === 100) {
                            showDjangoToast('ğŸ‰ ë§ˆì¼ìŠ¤í†¤ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                        }
                    }
                } catch (error) {
                    showDjangoToast(`ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
                    // ì—ëŸ¬ ì‹œ ì´ì „ ê°’ìœ¼ë¡œ ë³µì›
                    e.target.value = e.target.dataset.oldValue || 0;
                }
            }, 500);

            // í˜„ì¬ ê°’ ì €ì¥
            e.target.dataset.oldValue = progress;
        });
    });

    // ì§„í–‰ë¥  ëª¨ë“œ ì „í™˜ ë²„íŠ¼
    document.querySelectorAll('.toggle-mode-btn').forEach(btn => {
        btn.addEventListener('click', async (e) => {
            const milestoneId = e.target.dataset.milestoneId;
            const currentMode = e.target.dataset.currentMode;

            const confirmMessage = currentMode === 'manual'
                ? 'AUTO ëª¨ë“œë¡œ ì „í™˜í•˜ë©´ ì—°ê²°ëœ TODO ì™„ë£Œìœ¨ë¡œ ì§„í–‰ë¥ ì´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?'
                : 'ìˆ˜ë™ ëª¨ë“œë¡œ ì „í™˜í•˜ë©´ ì§ì ‘ ìŠ¬ë¼ì´ë”ë¡œ ì§„í–‰ë¥ ì„ ì¡°ì •í•´ì•¼ í•©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?';

            showConfirmModal(confirmMessage, async () => {
                try {
                    const response = await window.teamApi.toggleMilestoneProgressMode(
                        window.teamData.id,
                        milestoneId
                    );

                    if (response.success) {
                        showDjangoToast(response.message, 'success');
                        location.reload(); // UI ê°±ì‹ 
                    }
                } catch (error) {
                    showDjangoToast(`ëª¨ë“œ ì „í™˜ ì‹¤íŒ¨: ${error.message}`, 'error');
                }
            });
        });
    });
});
```

### 5-3. ë§ˆì¼ìŠ¤í†¤ ìˆ˜ì • ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸

**íŒŒì¼**: `static/js/components/milestone-edit-modal.js`

```javascript
/**
 * ë§ˆì¼ìŠ¤í†¤ ìˆ˜ì • ëª¨ë‹¬
 */

document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('editMilestoneModal');
    const closeBtn = document.getElementById('editModalClose');
    const cancelBtn = document.getElementById('editCancelBtn');
    const form = document.getElementById('editMilestoneForm');

    // ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    document.querySelectorAll('.edit-milestone-btn').forEach(btn => {
        btn.addEventListener('click', async (e) => {
            const milestoneId = e.target.closest('.edit-milestone-btn').dataset.milestoneId;
            await openEditModal(milestoneId);
        });
    });

    // ëª¨ë‹¬ ë‹«ê¸°
    const closeModal = () => {
        modal.classList.remove('active');
        form.reset();
    };

    closeBtn.addEventListener('click', closeModal);
    cancelBtn.addEventListener('click', closeModal);

    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });

    // í¼ ì œì¶œ
    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        await submitEditForm();
    });
});

/**
 * ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸° ë° ë°ì´í„° ë¡œë“œ
 */
async function openEditModal(milestoneId) {
    try {
        // ë§ˆì¼ìŠ¤í†¤ ë°ì´í„° ì¡°íšŒ
        const response = await window.teamApi.getMilestone(
            window.teamData.id,
            milestoneId
        );

        const milestone = response;

        // í¼ì— ë°ì´í„° ì±„ìš°ê¸°
        document.getElementById('edit-milestone-id').value = milestoneId;
        document.getElementById('edit-title').value = milestone.title;
        document.getElementById('edit-description').value = milestone.description || '';
        document.getElementById('edit-startdate').value = milestone.startdate;
        document.getElementById('edit-enddate').value = milestone.enddate;
        document.getElementById('edit-priority').value = milestone.priority;

        // ì§„í–‰ë¥  ëª¨ë“œ ë¼ë””ì˜¤ ë²„íŠ¼ ì„ íƒ
        if (milestone.progress_mode === 'auto') {
            document.getElementById('edit-mode-auto').checked = true;
            // AUTO ì§„í–‰ë¥  í‘œì‹œ
            document.getElementById('edit-auto-progress').textContent =
                milestone.current_progress;
        } else {
            document.getElementById('edit-mode-manual').checked = true;
        }

        // ëª¨ë‹¬ ì—´ê¸°
        document.getElementById('editMilestoneModal').classList.add('active');

    } catch (error) {
        showDjangoToast(`ë§ˆì¼ìŠ¤í†¤ ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`, 'error');
    }
}

/**
 * ìˆ˜ì • í¼ ì œì¶œ
 */
async function submitEditForm() {
    const milestoneId = document.getElementById('edit-milestone-id').value;

    const formData = {
        title: document.getElementById('edit-title').value.trim(),
        description: document.getElementById('edit-description').value,
        startdate: document.getElementById('edit-startdate').value,
        enddate: document.getElementById('edit-enddate').value,
        priority: document.getElementById('edit-priority').value,
        progress_mode: document.querySelector('input[name="progress_mode"]:checked').value
    };

    // ìœ íš¨ì„± ê²€ì‚¬
    if (!formData.title) {
        showDjangoToast('ë§ˆì¼ìŠ¤í†¤ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
    }

    if (new Date(formData.startdate) > new Date(formData.enddate)) {
        showDjangoToast('ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.', 'error');
        return;
    }

    try {
        const response = await window.teamApi.updateMilestoneFull(
            window.teamData.id,
            milestoneId,
            formData
        );

        if (response.success) {
            showDjangoToast(response.message, 'success');

            // ëª¨ë‹¬ ë‹«ê¸°
            document.getElementById('editMilestoneModal').classList.remove('active');

            // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (UI ê°±ì‹ )
            setTimeout(() => location.reload(), 500);
        }

    } catch (error) {
        showDjangoToast(`ìˆ˜ì • ì‹¤íŒ¨: ${error.message}`, 'error');
    }
}
```

---

## 6. UI/UX ìƒì„¸ ì„¤ê³„

### 6-1. CSS ìŠ¤íƒ€ì¼

**íŒŒì¼**: `static/css/components/progress-control.css`

```css
/* ì§„í–‰ë¥  ìŠ¬ë¼ì´ë” (ìˆ˜ë™ ëª¨ë“œ) */
.progress-slider-wrapper {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  background: #f9fafb;
  border-radius: 8px;
  margin-top: 8px;
}

.progress-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  border-radius: 3px;
  background: #e5e7eb;
  outline: none;
  transition: background 0.2s;
}

.progress-slider:hover {
  background: #d1d5db;
}

.progress-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: all 0.2s;
}

.progress-slider::-webkit-slider-thumb:hover {
  background: #2563eb;
  transform: scale(1.1);
}

.progress-value {
  align-self: flex-end;
  font-size: 13px;
  font-weight: 600;
  color: #3b82f6;
}

/* ì§„í–‰ë¥  ë°” (AUTO ëª¨ë“œ) */
.progress-bar-readonly {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #f9fafb;
  border-radius: 8px;
  margin-top: 8px;
}

.progress-bar-track {
  flex: 1;
  height: 8px;
  background: #e5e7eb;
  border-radius: 4px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #10b981, #34d399);
  border-radius: 4px;
  transition: width 0.3s ease;
}

/* 100% ì™„ë£Œ íš¨ê³¼ */
.progress-bar-fill[style*="100%"] {
  background: linear-gradient(90deg, #f59e0b, #fbbf24);
  animation: pulse-gold 2s infinite;
}

@keyframes pulse-gold {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.8; }
}

.progress-value-readonly {
  font-size: 13px;
  font-weight: 600;
  color: #10b981;
  min-width: 40px;
  text-align: right;
}

/* ëª¨ë“œ ì „í™˜ ë²„íŠ¼ */
.toggle-mode-btn {
  margin-top: 8px;
  padding: 8px 12px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 12px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  justify-content: center;
}

.toggle-mode-btn:hover {
  background: #f9fafb;
  border-color: #3b82f6;
  color: #3b82f6;
}

/* ì§„í–‰ë¥  ëª¨ë“œ ë°°ì§€ */
.progress-mode-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.progress-mode-badge.mode-manual {
  background: #dbeafe;
  color: #1e40af;
}

.progress-mode-badge.mode-auto {
  background: #d1fae5;
  color: #065f46;
}

/* TODO ì—°ê²° ì •ë³´ */
.todo-connection-info {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: #f0fdf4;
  border-radius: 6px;
  margin-top: 8px;
}

.todo-connection-info i {
  font-size: 16px;
  color: #10b981;
}

.todo-count {
  font-size: 13px;
  font-weight: 500;
  color: #065f46;
}
```

---

## 7. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ íë¦„

### 7-1. TODO ì™„ë£Œ ì‹œ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸

```
ì‚¬ìš©ì ì•¡ì…˜: TODO ì™„ë£Œ ì²´í¬
    â†“
JS: POST /api/v1/teams/1/todos/10/complete/
    â†“
Backend: TodoService.complete_todo()
    â”œâ”€ todo.is_completed = True
    â”œâ”€ todo.save() â†’ Todo ëª¨ë¸ì˜ save() ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë“œ ì‹¤í–‰
    â”‚   â””â”€ milestone.update_progress_from_todos()
    â”‚       â”œâ”€ ì§„í–‰ë¥  ì¬ê³„ì‚° (3ê°œ TODO ì¤‘ 1ê°œ ì™„ë£Œ â†’ 33%)
    â”‚       â”œâ”€ milestone.progress_percentage = 33
    â”‚       â””â”€ milestone.save()
    â””â”€ ì‘ë‹µ ë°˜í™˜: {
        "milestone_updated": true,
        "milestone_progress": 33
    }
    â†“
UI ì—…ë°ì´íŠ¸:
    â”œâ”€ ì§„í–‰ë¥  ë°”: 0% â†’ 33% ì• ë‹ˆë©”ì´ì…˜
    â”œâ”€ TODO ì¹´ìš´íŠ¸: "1 / 3 TODO"
    â””â”€ í† ìŠ¤íŠ¸: "TODO ì™„ë£Œ! ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  33%"
```

### 7-2. ë§ˆì¼ìŠ¤í†¤ ìˆ˜ì • ëª¨ë‹¬ í”Œë¡œìš°

```
1. ìˆ˜ì • ë²„íŠ¼ í´ë¦­
    â†“
2. GET /api/v1/teams/1/milestones/5/ (ë°ì´í„° ì¡°íšŒ)
    â†“
3. ëª¨ë‹¬ì— ê¸°ì¡´ ë°ì´í„° í‘œì‹œ
    - ì œëª©, ì„¤ëª…, ë‚ ì§œ, ìš°ì„ ìˆœìœ„, ì§„í–‰ë¥  ëª¨ë“œ
    â†“
4. ì‚¬ìš©ì ìˆ˜ì • ì…ë ¥
    â†“
5. "ìˆ˜ì • ì™„ë£Œ" í´ë¦­
    â†“
6. PUT /api/v1/teams/1/milestones/5/
    {
      "title": "ìˆ˜ì •ëœ ì œëª©",
      "priority": "critical",
      "progress_mode": "auto"
    }
    â†“
7. Backend: MilestoneService.update_milestone()
    - í•„ë“œ ì—…ë°ì´íŠ¸
    - progress_mode ë³€ê²½ ì‹œ ì§„í–‰ë¥  ì¬ê³„ì‚°
    â†“
8. ëª¨ë‹¬ ë‹«ê¸° + í˜ì´ì§€ ê°±ì‹ 
```

---

## 8. í…ŒìŠ¤íŠ¸ ì „ëµ

### 8-1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (33ê°œ ì¶”ê°€)

#### Milestone Service í…ŒìŠ¤íŠ¸ (12ê°œ)

**íŒŒì¼**: `teams/tests/test_milestone_service_extended.py`

- âœ… AUTO ëª¨ë“œ ë§ˆì¼ìŠ¤í†¤ ìƒì„±
- âœ… ìˆ˜ë™ â†’ AUTO ëª¨ë“œ ì „í™˜ (ì§„í–‰ë¥  ì¬ê³„ì‚°)
- âœ… AUTO â†’ ìˆ˜ë™ ëª¨ë“œ ì „í™˜ (ì§„í–‰ë¥  ìœ ì§€)
- âœ… ì œëª©/ìš°ì„ ìˆœìœ„ ìˆ˜ì •
- âœ… ì§„í–‰ë¥  ëª¨ë“œ ë³€ê²½ ì‹œ ìë™ ì¬ê³„ì‚°
- âœ… AUTO ëª¨ë“œì—ì„œ ìˆ˜ë™ ì§„í–‰ë¥  ì„¤ì • ì‹œë„ â†’ ì‹¤íŒ¨

#### TODO-Milestone í†µí•© í…ŒìŠ¤íŠ¸ (12ê°œ)

**íŒŒì¼**: `members/tests/test_todo_milestone_integration.py`

- âœ… TODOë¥¼ ë§ˆì¼ìŠ¤í†¤ì— í• ë‹¹
- âœ… TODO ë§ˆì¼ìŠ¤í†¤ ì—°ê²° í•´ì œ
- âœ… TODO ì™„ë£Œ ì‹œ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸ (33%)
- âœ… ëª¨ë“  TODO ì™„ë£Œ ì‹œ ë§ˆì¼ìŠ¤í†¤ ìë™ ì™„ë£Œ (100%)
- âœ… TODO ì™„ë£Œ ì·¨ì†Œ ì‹œ ë§ˆì¼ìŠ¤í†¤ ë¯¸ì™„ë£Œ ì²˜ë¦¬
- âœ… MANUAL ëª¨ë“œëŠ” TODO ì™„ë£Œì— ì˜í–¥ë°›ì§€ ì•ŠìŒ

#### API ViewSet í…ŒìŠ¤íŠ¸ (9ê°œ)

**íŒŒì¼**: `teams/tests/test_milestone_viewset_extended.py`

- âœ… PUT ìš”ì²­ìœ¼ë¡œ ë§ˆì¼ìŠ¤í†¤ ì „ì²´ ìˆ˜ì •
- âœ… ì§„í–‰ë¥  ëª¨ë“œ í† ê¸€ API
- âœ… TODO í†µê³„ ì¡°íšŒ API
- âœ… TODO í• ë‹¹ API
- âœ… TODO ì™„ë£Œ API (ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ì‘ë‹µ í¬í•¨)

### 8-2. í†µí•© í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ë§ˆì¼ìŠ¤í†¤ ìƒì„± â†’ TODO ì—°ê²° â†’ ì™„ë£Œ â†’ ì§„í–‰ë¥  100% â†’ ìë™ ì™„ë£Œ
- [ ] ìˆ˜ë™ ëª¨ë“œì—ì„œ ìŠ¬ë¼ì´ë”ë¡œ ì§„í–‰ë¥  ì¡°ì •
- [ ] AUTO ëª¨ë“œ ì „í™˜ ì‹œ ì¦‰ì‹œ ì¬ê³„ì‚°
- [ ] ìˆ˜ì • ëª¨ë‹¬ì—ì„œ ëª¨ë“  í•„ë“œ ë³€ê²½ ê°€ëŠ¥
- [ ] ë“œë˜ê·¸ì•¤ë“œë¡­ê³¼ ì§„í–‰ë¥  ê´€ë¦¬ ë™ì‹œ ì‘ë™

---

## 9. êµ¬í˜„ ìˆœì„œ ë° ì¼ì •

### Phase 1: í•µì‹¬ ê¸°ëŠ¥ (3-4ì¼) â­ ìµœìš°ì„ 

#### Day 1: ëª¨ë¸ ë° ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] Milestone ëª¨ë¸ì— `progress_mode` í•„ë“œ ì¶”ê°€
- [ ] Milestone ë©”ì„œë“œ êµ¬í˜„:
  - `calculate_progress_from_todos()`
  - `update_progress_from_todos()`
  - `get_current_progress()`
  - `get_todo_stats()`
- [ ] Todo ëª¨ë¸ì— `milestone` FK ì¶”ê°€
- [ ] Todo `save()` ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë“œ
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° ì‹¤í–‰
- [ ] ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„± ê²€ì¦

#### Day 2: ì„œë¹„ìŠ¤ ë ˆì´ì–´ í™•ì¥
- [ ] `MilestoneService.create_milestone()` - `progress_mode` íŒŒë¼ë¯¸í„° ì¶”ê°€
- [ ] `MilestoneService.update_milestone()` - ì œëª©/ì„¤ëª…/ìš°ì„ ìˆœìœ„/ëª¨ë“œ ìˆ˜ì • ì§€ì›
- [ ] `MilestoneService.toggle_progress_mode()` êµ¬í˜„
- [ ] `MilestoneService.get_milestone_todo_stats()` êµ¬í˜„
- [ ] `TodoService.complete_todo()` - ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ ë¡œì§ ì¶”ê°€
- [ ] `TodoService.assign_to_milestone()` êµ¬í˜„
- [ ] `TodoService.create_todo()` - `milestone_id` íŒŒë¼ë¯¸í„° ì¶”ê°€
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (24ê°œ)

#### Day 3: API ì—”ë“œí¬ì¸íŠ¸
- [ ] Serializer í™•ì¥:
  - `MilestoneSerializer` - `progress_mode`, `current_progress`, `todo_stats` ì¶”ê°€
  - `MilestoneCreateSerializer` - `progress_mode` ì¶”ê°€
  - `MilestoneUpdateSerializer` - ì œëª©/ì„¤ëª…/ìš°ì„ ìˆœìœ„ ì¶”ê°€
  - `TodoSerializer` - `milestone`, `milestone_info` ì¶”ê°€
- [ ] `MilestoneViewSet.update()` - ì „ì²´ ìˆ˜ì • ì§€ì› (PUT)
- [ ] `MilestoneViewSet.toggle_progress_mode` ì•¡ì…˜ ì¶”ê°€
- [ ] `MilestoneViewSet.todo_stats` ì•¡ì…˜ ì¶”ê°€
- [ ] `TodoViewSet.assign_milestone` ì•¡ì…˜ ì¶”ê°€
- [ ] `TodoViewSet.complete` - ì‘ë‹µì— ë§ˆì¼ìŠ¤í†¤ ì •ë³´ ì¶”ê°€
- [ ] API í…ŒìŠ¤íŠ¸ ì‘ì„± (9ê°œ)

#### Day 4: í”„ë¡ íŠ¸ì—”ë“œ ê¸°ë³¸ UI
- [ ] API Client í™•ì¥ (`static/js/api/client.js`)
  - `updateMilestoneFull()` (PUT)
  - `toggleMilestoneProgressMode()`
  - `assignTodoToMilestone()`
- [ ] ì§„í–‰ë¥  ìŠ¬ë¼ì´ë” ì»´í¬ë„ŒíŠ¸ (`progress-control.js`)
  - ìˆ˜ë™ ëª¨ë“œ: ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  - AUTO ëª¨ë“œ: ì½ê¸° ì „ìš© ì§„í–‰ ë°”
  - ëª¨ë“œ ì „í™˜ ë²„íŠ¼
- [ ] íƒ€ì„ë¼ì¸ HTML í…œí”Œë¦¿ ì—…ë°ì´íŠ¸
  - ì§„í–‰ë¥  ì»¨íŠ¸ë¡¤ ì˜ì—­ ì¶”ê°€
  - ì§„í–‰ë¥  ëª¨ë“œ ë°°ì§€
  - TODO ì—°ê²° ì •ë³´ í‘œì‹œ
- [ ] CSS ìŠ¤íƒ€ì¼ ì‘ì„± (`progress-control.css`)

### Phase 2: ë§ˆì¼ìŠ¤í†¤ ìˆ˜ì • ëª¨ë‹¬ (1-2ì¼)

#### Day 5: ìˆ˜ì • ëª¨ë‹¬ êµ¬í˜„
- [ ] HTML í…œí”Œë¦¿ ì‘ì„±
  - ìˆ˜ì • ëª¨ë‹¬ êµ¬ì¡°
  - í¼ í•„ë“œ (ì œëª©, ì„¤ëª…, ë‚ ì§œ, ìš°ì„ ìˆœìœ„, ì§„í–‰ë¥  ëª¨ë“œ)
  - ë¼ë””ì˜¤ ë²„íŠ¼ ê·¸ë£¹
- [ ] JavaScript ì»´í¬ë„ŒíŠ¸ (`milestone-edit-modal.js`)
  - `openEditModal()` - ë°ì´í„° ë¡œë“œ ë° í¼ ì±„ìš°ê¸°
  - `submitEditForm()` - PUT ìš”ì²­
  - ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸° ì´ë²¤íŠ¸
- [ ] CSS ìŠ¤íƒ€ì¼ (`milestone-edit-modal.css`)
  - ëª¨ë‹¬ ë ˆì´ì•„ì›ƒ
  - ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼
  - ë‚ ì§œ ë²”ìœ„ ê·¸ë£¹
- [ ] ì¢Œì¸¡ íŒ¨ë„ì— ìˆ˜ì • ë²„íŠ¼ ì¶”ê°€

### Phase 3: TODO í˜ì´ì§€ ì—°ë™ (1ì¼)

#### Day 6: TODO ë§ˆì¼ìŠ¤í†¤ í• ë‹¹ UI
- [ ] TODO ì¹´ë“œì— ë§ˆì¼ìŠ¤í†¤ ë°°ì§€ í‘œì‹œ
- [ ] ë§ˆì¼ìŠ¤í†¤ í• ë‹¹ ë“œë¡­ë‹¤ìš´ ëª¨ë‹¬
  - ì§„í–‰ ì¤‘ì¸ ë§ˆì¼ìŠ¤í†¤ ëª©ë¡ ì¡°íšŒ
  - ë§ˆì¼ìŠ¤í†¤ ì„ íƒ UI
- [ ] TODO ì™„ë£Œ ì‹œ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ê°œì„ 
  - "ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  X% ì—…ë°ì´íŠ¸ë¨" í‘œì‹œ
  - ë§ˆì¼ìŠ¤í†¤ ì™„ë£Œ ì‹œ ì¶•í•˜ ë©”ì‹œì§€
- [ ] JavaScript ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  - `assignTodoToMilestone()`
  - `openMilestoneSelector()`

### Phase 4: ìµœì¢… í…ŒìŠ¤íŠ¸ ë° ë°°í¬ (1ì¼)

#### Day 7: í†µí•© í…ŒìŠ¤íŠ¸ ë° ë°°í¬
- [ ] ì „ì²´ ê¸°ëŠ¥ í†µí•© í…ŒìŠ¤íŠ¸
  - ë§ˆì¼ìŠ¤í†¤ ìƒì„± (ìˆ˜ë™/AUTO ëª¨ë“œ)
  - TODO í• ë‹¹ ë° ì™„ë£Œ
  - ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸ ê²€ì¦
  - ìˆ˜ì • ëª¨ë‹¬ ì „ì²´ í•„ë“œ ë³€ê²½
  - ëª¨ë“œ ì „í™˜ í…ŒìŠ¤íŠ¸
- [ ] ì—£ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
  - TODO 0ê°œì¸ ë§ˆì¼ìŠ¤í†¤
  - ë§ˆì¼ìŠ¤í†¤ ì—†ëŠ” TODO
  - ë™ì‹œ ì—…ë°ì´íŠ¸ ê²½í•© ì¡°ê±´
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  - N+1 ì¿¼ë¦¬ í™•ì¸ (select_related, prefetch_related)
  - ëŒ€ëŸ‰ TODO (100ê°œ+) ì„±ëŠ¥
- [ ] ë°°í¬ ì¤€ë¹„
  - ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ê²€ì¦
  - í”„ë¡œë•ì…˜ í™˜ê²½ í…ŒìŠ¤íŠ¸
  - ë¡¤ë°± ê³„íš ìˆ˜ë¦½
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸
  - API ë¬¸ì„œ (Swagger)
  - ì‚¬ìš©ì ê°€ì´ë“œ
  - ì•„í‚¤í…ì²˜ ë¬¸ì„œ

---

## 10. ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

### 10-1. ê°œë°œ í™˜ê²½ ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
# 1. ìµœì‹  ì½”ë“œ Pull
git pull origin main

# 2. ê°€ìƒí™˜ê²½ í™œì„±í™”
source venv/bin/activate  # Linux/Mac
# ë˜ëŠ”
venv\Scripts\activate  # Windows

# 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
python manage.py makemigrations teams
python manage.py makemigrations members

# 4. ë§ˆì´ê·¸ë ˆì´ì…˜ í™•ì¸
python manage.py showmigrations

# 5. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
python manage.py migrate

# 6. ê¸°ì¡´ ë§ˆì¼ìŠ¤í†¤ ë°ì´í„° í™•ì¸
python manage.py shell
>>> from teams.models import Milestone
>>> Milestone.objects.filter(progress_mode='manual').count()
# ëª¨ë“  ê¸°ì¡´ ë§ˆì¼ìŠ¤í†¤ì´ 'manual' ëª¨ë“œì—¬ì•¼ í•¨
```

### 10-2. í”„ë¡œë•ì…˜ í™˜ê²½ ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
# 1. ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
python manage.py dumpdata teams.Milestone > milestone_backup.json
python manage.py dumpdata members.Todo > todo_backup.json

# 2. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ (ë‹¤ìš´íƒ€ì„ ì—†ìŒ)
python manage.py migrate teams 0007_add_progress_mode_to_milestone
python manage.py migrate members 0006_add_milestone_to_todo

# 3. ë°ì´í„° ê²€ì¦
python manage.py shell
>>> from teams.models import Milestone
>>> from members.models import Todo
>>> Milestone.objects.filter(progress_mode__isnull=True).count()
# 0ì´ì–´ì•¼ í•¨
>>> Todo.objects.filter(milestone__isnull=False).count()
# 0ì´ì–´ì•¼ í•¨ (ì´ˆê¸°ì—ëŠ” ì—°ê²°ëœ TODO ì—†ìŒ)

# 4. ë¡¤ë°± ê³„íš (ë¬¸ì œ ë°œìƒ ì‹œ)
python manage.py migrate teams 0006_alter_team_host
python manage.py migrate members 0005_alter_todo_assignee
python manage.py loaddata milestone_backup.json
python manage.py loaddata todo_backup.json
```

### 10-3. ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸

ê¸°ì¡´ ë§ˆì¼ìŠ¤í†¤ì˜ `progress_mode`ë¥¼ 'manual'ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì€ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì—ì„œ `default='manual'`ë¡œ ìë™ ì²˜ë¦¬ë˜ë¯€ë¡œ ë³„ë„ ìŠ¤í¬ë¦½íŠ¸ ë¶ˆí•„ìš”.

ë‹¨, íŠ¹ì • ë§ˆì¼ìŠ¤í†¤ì„ AUTO ëª¨ë“œë¡œ ì „í™˜í•˜ë ¤ë©´:

```python
# management/commands/convert_milestone_to_auto.py

from django.core.management.base import BaseCommand
from teams.models import Milestone

class Command(BaseCommand):
    help = 'íŠ¹ì • ë§ˆì¼ìŠ¤í†¤ì„ AUTO ëª¨ë“œë¡œ ì „í™˜'

    def add_arguments(self, parser):
        parser.add_argument('milestone_id', type=int, help='ë§ˆì¼ìŠ¤í†¤ ID')

    def handle(self, *args, **options):
        milestone_id = options['milestone_id']

        try:
            milestone = Milestone.objects.get(pk=milestone_id)

            self.stdout.write(f'ë§ˆì¼ìŠ¤í†¤: {milestone.title}')
            self.stdout.write(f'í˜„ì¬ ëª¨ë“œ: {milestone.progress_mode}')
            self.stdout.write(f'í˜„ì¬ ì§„í–‰ë¥ : {milestone.progress_percentage}%')

            # AUTO ëª¨ë“œë¡œ ì „í™˜
            milestone.progress_mode = 'auto'
            milestone.update_progress_from_todos()

            self.stdout.write(self.style.SUCCESS(
                f'AUTO ëª¨ë“œë¡œ ì „í™˜ ì™„ë£Œ! ìƒˆ ì§„í–‰ë¥ : {milestone.progress_percentage}%'
            ))

        except Milestone.DoesNotExist:
            self.stdout.write(self.style.ERROR(f'ë§ˆì¼ìŠ¤í†¤ ID {milestone_id}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'))
```

ì‚¬ìš©ë²•:
```bash
python manage.py convert_milestone_to_auto 5
```

---

## 11. ì˜ˆìƒ ì„±ê³¼

### 11-1. ê¸°ëŠ¥ì  ê°œì„ 

| í•­ëª© | ê°œì„  ì „ | ê°œì„  í›„ | íš¨ê³¼ |
|------|--------|---------|------|
| ì§„í–‰ë¥  ê´€ë¦¬ | âŒ UI ì—†ìŒ | âœ… ìŠ¬ë¼ì´ë” + AUTO ê³„ì‚° | ì‹¤ì‹œê°„ ì§„í–‰ë¥  ì¶”ì  |
| ë§ˆì¼ìŠ¤í†¤ ìˆ˜ì • | âŒ ë‚ ì§œë§Œ ë“œë˜ê·¸ | âœ… ì „ì²´ í•„ë“œ ìˆ˜ì • ê°€ëŠ¥ | ìœ ì—°í•œ ê´€ë¦¬ |
| TODO ì—°ë™ | âŒ ì—†ìŒ | âœ… ìë™ ì§„í–‰ë¥  ê³„ì‚° | ì •í™•í•œ í”„ë¡œì íŠ¸ ìƒíƒœ íŒŒì•… |
| íŒ€ í˜‘ì—… | âš ï¸ ìˆ˜ë™ ì—…ë°ì´íŠ¸ í•„ìš” | âœ… ìë™ ì‹¤ì‹œê°„ ê°±ì‹  | íŒ€ì› ê°„ íˆ¬ëª…ì„± í–¥ìƒ |

### 11-2. ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

- **ì§„í–‰ë¥  ê°€ì‹œì„±**: ë§ˆì¼ìŠ¤í†¤ ì§„ì²™ë„ë¥¼ í•œëˆˆì— íŒŒì•…
- **ìë™í™”**: TODO ì™„ë£Œ ì‹œ ì§„í–‰ë¥  ìë™ ë°˜ì˜ (ìˆ˜ë™ ì…ë ¥ ë¶ˆí•„ìš”)
- **ìœ ì—°ì„±**: ìˆ˜ë™/ìë™ ëª¨ë“œ ì„ íƒ ê°€ëŠ¥ (í”„ë¡œì íŠ¸ íŠ¹ì„±ì— ë”°ë¼)
- **ì‹¤ì‹œê°„ í”¼ë“œë°±**: TODO ì™„ë£Œ ì‹œ ë§ˆì¼ìŠ¤í†¤ ì§„í–‰ë¥  ì¦‰ì‹œ ì—…ë°ì´íŠ¸ í† ìŠ¤íŠ¸

### 11-3. ê°œë°œ ìƒì‚°ì„±

- **ì½”ë“œ ì¬ì‚¬ìš©**: ì„œë¹„ìŠ¤ ë ˆì´ì–´ ê¸°ë°˜ ì„¤ê³„ë¡œ í…ŒìŠ¤íŠ¸ ìš©ì´
- **API ìš°ì„ **: RESTful APIë¡œ í–¥í›„ ëª¨ë°”ì¼ ì•± ì—°ë™ ê°€ëŠ¥
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: 33ê°œ ì‹ ê·œ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (ì´ 225 + 33 = 258ê°œ)
- **ë¬¸ì„œí™”**: Swagger ìë™ ìƒì„±ìœ¼ë¡œ API ë¬¸ì„œ ìµœì‹  ìœ ì§€

---

## 12. ì°¸ê³  ìë£Œ

- [í˜„ì¬ ë§ˆì¼ìŠ¤í†¤ êµ¬í˜„](../../teams/models.py)
- [í˜„ì¬ TODO êµ¬í˜„](../../members/models.py)
- [ì„œë¹„ìŠ¤ ë ˆì´ì–´ ê°€ì´ë“œë¼ì¸](service_layer_guidelines.md)
- [API ì•„í‚¤í…ì²˜ ë§¤í•‘](detailed_api_ssr_mapping.md)
- [Members App ì‹¤ì‹œê°„ UI ì‹œìŠ¤í…œ](../../development/ui_ux/members_realtime_ui.md)

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-25
**ë‹¤ìŒ ë‹¨ê³„**: Phase 1 Day 1 ì‹œì‘ - ëª¨ë¸ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ êµ¬í˜„
