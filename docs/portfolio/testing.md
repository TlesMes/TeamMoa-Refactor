# í…ŒìŠ¤íŠ¸ ì „ëµ

> **249ê°œ í…ŒìŠ¤íŠ¸ë¡œ 6ê°œ ì•± ì „ì²´ ê²€ì¦**
>
> ì„œë¹„ìŠ¤ ë ˆì´ì–´ ìš°ì„  ì „ëµ, fixture ê¸°ë°˜ ì¬ì‚¬ìš©ì„±, DB ìƒíƒœ ê²€ì¦ìœ¼ë¡œ ì•ˆì •ì„± í™•ë³´

---

## ëª©ì°¨
- [1. í…ŒìŠ¤íŠ¸ ê°œìš”](#1-í…ŒìŠ¤íŠ¸-ê°œìš”)
- [2. í…ŒìŠ¤íŠ¸ ë²”ìœ„ / ì»¤ë²„ë¦¬ì§€](#2-í…ŒìŠ¤íŠ¸-ë²”ìœ„--ì»¤ë²„ë¦¬ì§€)
- [3. í…ŒìŠ¤íŠ¸ ì „ëµ](#3-í…ŒìŠ¤íŠ¸-ì „ëµ)
- [4. í…ŒìŠ¤íŠ¸ êµ¬ì¡°](#4-í…ŒìŠ¤íŠ¸-êµ¬ì¡°)
- [5. í…ŒìŠ¤íŠ¸ êµ¬í˜„ ë°©ì‹](#5-í…ŒìŠ¤íŠ¸-êµ¬í˜„-ë°©ì‹)
- [6. Fixture íŒ¨í„´](#6-fixture-íŒ¨í„´)
- [7. í•™ìŠµ ë‚´ìš©](#7-í•™ìŠµ-ë‚´ìš©)

---

## 1. í…ŒìŠ¤íŠ¸ ê°œìš”

### ì™œ í…ŒìŠ¤íŠ¸ë¥¼ ë„ì…í–ˆëŠ”ê°€?

**ë°°ê²½**:
- Django í”„ë¡œì íŠ¸ì—ì„œ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹ ë¢°ì„± í™•ë³´** í•„ìš”
- API + SSR í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡°ì—ì„œ **ì¼ê´€ëœ ê²€ì¦ ì „ëµ** ìš”êµ¬
- ë¦¬íŒ©í† ë§ ë° ê¸°ëŠ¥ ì¶”ê°€ ì‹œ **íšŒê·€ ë²„ê·¸ ë°©ì§€**

**ëª©í‘œ**:
- âœ… 6ê°œ ì•±ì˜ **í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§** ê²€ì¦
- âœ… 28ê°œ í˜ì´ì§€, 24ê°œ REST API **ë™ì‘ ë³´ì¥**
- âœ… ë¦¬íŒ©í† ë§ ì‹œ **ì•ˆì „ë§** ì œê³µ

### í…ŒìŠ¤íŠ¸ ê·œëª¨

<!-- AUTO:TEST_COUNT -->
```
ì´ 249ê°œ í…ŒìŠ¤íŠ¸
â”œâ”€ ì„œë¹„ìŠ¤ ë ˆì´ì–´: 142ê°œ (57%)
â”œâ”€ SSR: 49ê°œ (20%)
â””â”€ API: 58ê°œ (23%)
```


---

## 2. í…ŒìŠ¤íŠ¸ ë²”ìœ„ / ì»¤ë²„ë¦¬ì§€

### ğŸ“Š í…ŒìŠ¤íŠ¸ í†µê³„

<!-- AUTO-GENERATED-TEST-STATS:START -->
| ì•± | ì„œë¹„ìŠ¤ | API | SSR | í•©ê³„ |
|---|---------|-----|-----|------|
| Accounts | 18 | - | 10 | 28 |
| Teams | 51 | 12 | 15 | 78 |
| Members | 32 | 10 | 3 | 45 |
| Schedules | 12 | 13 | 9 | 34 |
| Shares | 20 | - | 13 | 33 |
| Mindmaps | 16 | 8 | 7 | 31 |
| **ì´ê³„** | **149** | **43** | **57** | **249** |
<!-- AUTO-GENERATED-TEST-STATS:END -->

### ğŸ” ì£¼ìš” ê²€ì¦ í•­ëª©

| ì•± | ì£¼ìš” ê²€ì¦ í•­ëª© |
|----|----------------|
| Teams | íŒ€ ìƒì„±/ê°€ì…/í•´ì²´, ë§ˆì¼ìŠ¤í†¤ CRUD, ë§ˆì¼ìŠ¤í†¤-TODO ì—°ë™ |
| Members | TODO ë“œë˜ê·¸ì•¤ë“œë¡­, ìƒíƒœ ë³€ê²½, ë§ˆì¼ìŠ¤í†¤ í• ë‹¹ |
| Schedules | ì£¼ê°„ ìŠ¤ì¼€ì¤„, íŒ€ ê°€ìš©ì„± ê³„ì‚° |
| Shares | ê²Œì‹œíŒ CRUD, ê²€ìƒ‰, íŒŒì¼ ì²˜ë¦¬, íƒˆí‡´ ì‘ì„±ì ì²˜ë¦¬ |
| Accounts | íšŒì›ê°€ì…, ì´ë©”ì¼ ì¸ì¦, íšŒì› íƒˆí‡´ |
| Mindmaps | ë…¸ë“œ/ì—°ê²°ì„  CRUD, ì‹¤ì‹œê°„ í˜‘ì—… |

<!-- AUTO:TEST_COUNT -->
### ì™œ 249ê°œì¸ê°€?

**í…ŒìŠ¤íŠ¸ í•„ìš”ì„± íŒë‹¨ ê¸°ì¤€**:

1. **ì„œë¹„ìŠ¤ ë ˆì´ì–´ (142ê°œ)** - ê° ê¸°ëŠ¥ë‹¹ 2-4ê°œ í…ŒìŠ¤íŠ¸
   - ì„±ê³µ ì¼€ì´ìŠ¤ (1ê°œ)
   - ì‹¤íŒ¨/ì˜ˆì™¸ ì¼€ì´ìŠ¤ (1-2ê°œ)
   - ê¶Œí•œ/ê²½ê³„ê°’ ê²€ì¦ (1ê°œ)
   - ì˜ˆì‹œ: íŒ€ ìƒì„± â†’ ì„±ê³µ, ì¤‘ë³µëª… ì‹¤íŒ¨, í˜¸ìŠ¤íŠ¸ ê¶Œí•œ, ìµœëŒ€ ì¸ì› ì´ˆê³¼

2. **API (58ê°œ)** - ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ ì—”ë“œí¬ì¸íŠ¸ë§Œ
   - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í˜¸ì¶œí•˜ëŠ” APIë§Œ ì„ ë³„
   - HTTP ìƒíƒœ ì½”ë“œ, ê¶Œí•œ, JSON í˜•ì‹ ê²€ì¦
   - ë¯¸ì‚¬ìš© CRUD API ì œì™¸ë¡œ í…ŒìŠ¤íŠ¸ ìµœì†Œí™”

3. **SSR (57ê°œ)** - 28ê°œ í˜ì´ì§€ì˜ í•µì‹¬ íë¦„
   - GET: í…œí”Œë¦¿ ë Œë”ë§, ì»¨í…ìŠ¤íŠ¸ ê²€ì¦
   - POST: Form ì œì¶œ, ë¦¬ë‹¤ì´ë ‰íŠ¸, DB ë³€ê²½
   - ê° í˜ì´ì§€ë‹¹ í‰ê·  2ê°œ í…ŒìŠ¤íŠ¸ (GET + POST)

**ê²°ê³¼**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹ ë¢°ì„± í™•ë³´ + ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ë²”ìœ„

### í…ŒìŠ¤íŠ¸ ìš°ì„ ìˆœìœ„

1. **ì„œë¹„ìŠ¤ ë ˆì´ì–´ (55%)** - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì‹¬ ê²€ì¦
   - API/SSR ëª¨ë‘ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ìš°ì„  ê²€ì¦
   - HTTP ì˜ì¡´ì„± ì—†ì´ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸

2. **SSR ë·° (26%)** - í…œí”Œë¦¿ ë Œë”ë§, Form ì²˜ë¦¬
   - Django TestClientë¡œ ì‹¤ì œ í˜ì´ì§€ ë™ì‘ í™•ì¸

3. **API (19%)** - REST API ì—”ë“œí¬ì¸íŠ¸
   - DRF TestClientë¡œ JSON ì‘ë‹µ ê²€ì¦
   - **ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ APIë§Œ** í…ŒìŠ¤íŠ¸ (ë¯¸ì‚¬ìš© API ì œì™¸)

---

## 3. í…ŒìŠ¤íŠ¸ ì „ëµ

### í•µì‹¬ ì›ì¹™

#### 1. ì„œë¹„ìŠ¤ ë ˆì´ì–´ ìš°ì„  í…ŒìŠ¤íŠ¸

**ì´ìœ **: API/SSR ëª¨ë‘ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ, í•œ ë²ˆì˜ í…ŒìŠ¤íŠ¸ë¡œ ì–‘ìª½ ê²€ì¦

```
[ API ViewSet ] â”€â”
                 â”œ-â†’ [ Service Layer ] â† í…ŒìŠ¤íŠ¸ ì§‘ì¤‘
[ SSR View ]    â”€â”˜
```

**ì¥ì **:
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ HTTPì™€ ë…ë¦½ì ìœ¼ë¡œ ê²€ì¦
- API/SSR ë¦¬íŒ©í† ë§ ì‹œì—ë„ í…ŒìŠ¤íŠ¸ ìœ ì§€
- í…ŒìŠ¤íŠ¸ ì¤‘ë³µ ìµœì†Œí™”

#### 2. Given-When-Then íŒ¨í„´

**ì´ìœ **: í…ŒìŠ¤íŠ¸ ê°€ë…ì„± ë° ì˜ë„ ëª…í™•í™”

```python
def test_create_team(user):
    # Given: ì´ˆê¸° ìƒíƒœ ì„¤ì •
    team_data = {'title': 'í…ŒìŠ¤íŠ¸íŒ€', 'maxuser': 10}

    # When: ë™ì‘ ì‹¤í–‰
    team = TeamService.create_team(user, team_data)

    # Then: ê²°ê³¼ ê²€ì¦
    assert team.host == user
```

#### 3. DB ìƒíƒœ ê¸°ë°˜ ê²€ì¦

**ì´ìœ **: êµ¬í˜„ ì˜ì¡´ë„ ìµœì†Œí™” (ë¦¬íŒ©í† ë§ì— ê°•í•¨)

**ì§€ì–‘**:
```python
# Bad: ì„œë¹„ìŠ¤ ë‚´ë¶€ ë™ì‘ ê²€ì¦
assert TeamService.create_team.called_once()
```

**ì§€í–¥**:
```python
# Good: DB ìƒíƒœ í™•ì¸
assert Team.objects.filter(title='í…ŒìŠ¤íŠ¸íŒ€').exists()
assert team.host == user
assert TeamUser.objects.filter(team=team, user=user).exists()
```

#### 4. ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ APIë§Œ í…ŒìŠ¤íŠ¸

**ì´ìœ **: í…ŒìŠ¤íŠ¸ ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ìµœì†Œí™”

**ì›ì¹™**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‹¤ì œ í˜¸ì¶œí•˜ëŠ” APIë§Œ í…ŒìŠ¤íŠ¸, ë¯¸ì‚¬ìš© APIëŠ” ì œì™¸

#### 5. Mock ì‚¬ìš© ìµœì†Œí™”

**ì›ì¹™**: Django í…ŒìŠ¤íŠ¸ í™˜ê²½ì˜ íŠ¸ëœì­ì…˜ ê²©ë¦¬ë¥¼ ì‹ ë¢°, ì‹¤ì œ DB ì‚¬ìš©

**Mockì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ **:
- ì‹¤ì œ DB ì‚¬ìš©ìœ¼ë¡œ **í†µí•© í…ŒìŠ¤íŠ¸** íš¨ê³¼
- pytest-djangoì˜ `@pytest.mark.django_db`ë¡œ **ìë™ íŠ¸ëœì­ì…˜ ë¡¤ë°±**
- ì™¸ë¶€ ì˜ì¡´ì„± ìµœì†Œ (ì´ë©”ì¼ì€ Djangoì˜ `mail.outbox` ì‚¬ìš©)

**Mockì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°** (í˜„ì¬ 0ê±´):
- ì™¸ë¶€ API í˜¸ì¶œ (í˜„ì¬ ì—†ìŒ)
- ê²°ì œ ì‹œìŠ¤í…œ ë“± ì‹¤ì œ ë¹„ìš© ë°œìƒí•˜ëŠ” ì„œë¹„ìŠ¤ (í˜„ì¬ ì—†ìŒ)

---

## 4. í…ŒìŠ¤íŠ¸ êµ¬ì¡°

### í…ŒìŠ¤íŠ¸ íŒŒì¼ êµ¬ì¡°

```
teams/tests/
â”œâ”€â”€ conftest.py                  # fixture ì •ì˜ (user, team, client ë“±)
â”œâ”€â”€ test_team_service.py         # íŒ€ ì„œë¹„ìŠ¤ (23ê°œ)
â”œâ”€â”€ test_milestone_service.py    # ë§ˆì¼ìŠ¤í†¤ ì„œë¹„ìŠ¤ (13ê°œ)
â”œâ”€â”€ test_team_viewset.py         # íŒ€ API (17ê°œ)
â””â”€â”€ test_team_views.py           # SSR ë·° (13ê°œ)
```

### êµ¬ì¡°ë¥¼ ì´ë ‡ê²Œ ë‚˜ëˆˆ ì´ìœ 

**ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¶„ë¦¬**:
- `test_team_service.py`: íŒ€ ìƒì„±/ê°€ì…/í•´ì²´ ë¡œì§
- `test_milestone_service.py`: ë§ˆì¼ìŠ¤í†¤ CRUD ë¡œì§
- **ì´ìœ **: ì„œë¹„ìŠ¤ ì±…ì„ë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

**API/SSR ë¶„ë¦¬**:
- `test_team_viewset.py`: DRF API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- `test_team_views.py`: Django SSR ë·° í…ŒìŠ¤íŠ¸
- **ì´ìœ **: í´ë¼ì´ì–¸íŠ¸ íƒ€ì…(APIClient vs TestClient)ì´ ë‹¤ë¦„

**conftest.py ì—­í• **:
- ê³µí†µ fixture ì •ì˜ (user, team, authenticated_client ë“±)
- **ì´ìœ **: í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¤‘ë³µ ì œê±°, ìœ ì§€ë³´ìˆ˜ ì§‘ì¤‘í™”

### í…ŒìŠ¤íŠ¸ ê³„ì¸µ ê°„ ì±…ì„ ë¶„ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SSR í…ŒìŠ¤íŠ¸ (test_team_views.py)     â”‚  â†’ í…œí”Œë¦¿, ë¦¬ë‹¤ì´ë ‰íŠ¸, Form ê²€ì¦
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API í…ŒìŠ¤íŠ¸ (test_team_viewset.py)   â”‚  â†’ JSON ì‘ë‹µ, ìƒíƒœ ì½”ë“œ, ê¶Œí•œ ê²€ì¦
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ (test_*_service.py)    â”‚  â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, DB ìƒíƒœ ê²€ì¦
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê²€ì¦ ì±…ì„**:
- **ì„œë¹„ìŠ¤**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì˜ˆì™¸ ì²˜ë¦¬, DB ìƒíƒœ
- **API**: HTTP ìƒíƒœ ì½”ë“œ, JSON í˜•ì‹, ê¶Œí•œ
- **SSR**: í…œí”Œë¦¿ ë Œë”ë§, ì»¨í…ìŠ¤íŠ¸, ë¦¬ë‹¤ì´ë ‰íŠ¸

---

## 5. í…ŒìŠ¤íŠ¸ êµ¬í˜„ ë°©ì‹

### 5.1 ì„œë¹„ìŠ¤ ë ˆì´ì–´ í…ŒìŠ¤íŠ¸

**ëª©ì **: HTTPì™€ ë¬´ê´€í•œ ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦

**ê²€ì¦ ë°©ì‹**: DB ìƒíƒœ ì§ì ‘ í™•ì¸ (êµ¬í˜„ ì˜ì¡´ë„ ìµœì†Œí™”)

#### ì˜ˆì‹œ: Given-When-Then íŒ¨í„´

```python
@pytest.mark.django_db
def test_create_team_success(self, user):
    # Given: ì´ˆê¸° ë°ì´í„° ì¤€ë¹„
    team_data = {'title': 'í…ŒìŠ¤íŠ¸íŒ€', 'maxuser': 10, ...}

    # When: ì„œë¹„ìŠ¤ ë©”ì„œë“œ í˜¸ì¶œ
    team = TeamService.create_team(user, team_data)

    # Then: DB ìƒíƒœ ê²€ì¦
    assert team.host == user
    assert TeamUser.objects.filter(team=team, user=user).exists()
```

**í•µì‹¬**: DB ìƒíƒœ ê¸°ë°˜ ê²€ì¦ìœ¼ë¡œ êµ¬í˜„ ë³€ê²½ì— ê°•í•œ í…ŒìŠ¤íŠ¸

---

### 5.2 API í…ŒìŠ¤íŠ¸

**ëª©ì **: REST API ì—”ë“œí¬ì¸íŠ¸ì˜ HTTP ì‘ë‹µ ê²€ì¦

**ê²€ì¦ ìš”ì†Œ**: ìƒíƒœ ì½”ë“œ, JSON êµ¬ì¡°, ê¶Œí•œ, DB ë³€ê²½

#### ì˜ˆì‹œ: DRF APIClient í™œìš©

```python
@pytest.mark.django_db
def test_create_milestone(self, authenticated_api_client, team):
    # Given
    url = f'/api/v1/teams/{team.pk}/milestones/'
    data = {'title': '1ì°¨ ë§ˆì¼ìŠ¤í†¤', 'start_date': '2025-01-01', ...}

    # When
    response = authenticated_api_client.post(url, data, format='json')

    # Then: HTTP ì‘ë‹µ + DB ì´ì¤‘ ê²€ì¦
    assert response.status_code == status.HTTP_201_CREATED
    assert Milestone.objects.filter(title='1ì°¨ ë§ˆì¼ìŠ¤í†¤').exists()
```

**í•µì‹¬**: `authenticated_api_client` fixtureë¡œ ì¸ì¦ ì²˜ë¦¬ ìë™í™”

---

### 5.3 SSR ë·° í…ŒìŠ¤íŠ¸

**ëª©ì **: Django í…œí”Œë¦¿ ë Œë”ë§ ë° Form ì²˜ë¦¬ ê²€ì¦

**ê²€ì¦ ìš”ì†Œ**: í…œí”Œë¦¿ ì‚¬ìš©, ì»¨í…ìŠ¤íŠ¸ ë°ì´í„°, ë¦¬ë‹¤ì´ë ‰íŠ¸

#### ì˜ˆì‹œ: Django TestClient í™œìš©

```python
@pytest.mark.django_db
def test_team_create_post(self, authenticated_web_client, user):
    # Given
    data = {'title': 'ìƒˆ íŒ€', 'maxuser': 10, ...}

    # When
    response = authenticated_web_client.post(reverse('teams:team_create'), data)

    # Then: ë¦¬ë‹¤ì´ë ‰íŠ¸ + í…œí”Œë¦¿ + DB ê²€ì¦
    assert response.status_code == 302
    assert Team.objects.filter(title='ìƒˆ íŒ€', host=user).exists()
```

**í•µì‹¬**: `authenticated_web_client` fixtureë¡œ ì„¸ì…˜ ì¸ì¦ ìë™í™”

---

## 6. Fixture íŒ¨í„´

### Fixture ì¬ì‚¬ìš©ìœ¼ë¡œ ì¤‘ë³µ ì½”ë“œ ì œê±°

**Before (fixture ì—†ìŒ)**:
```python
def test_something():
    user = User.objects.create_user(...)  # ë§¤ë²ˆ ë°˜ë³µ
    client = APIClient()
    client.force_authenticate(user=user)
    team = Team.objects.create(...)
    TeamUser.objects.create(...)

    response = client.get(...)  # ì‹¤ì œ í…ŒìŠ¤íŠ¸
    assert response.status_code == 200
```

**After (fixture ì‚¬ìš©)**:
```python
def test_something(authenticated_api_client, team):
    response = authenticated_api_client.get(...)
    assert response.status_code == 200
```

**íš¨ê³¼**: ì„¤ì • ì½”ë“œ ì œê±°, í…ŒìŠ¤íŠ¸ ì˜ë„ ëª…í™•í™”

### Fixture êµ¬ì¡°

**ë£¨íŠ¸ conftest.py** - ê³µí†µ fixture
| Fixture | ì—­í•  |
|---------|------|
| `user`, `another_user`, `third_user` | í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì |
| `team` | ê¸°ë³¸ íŒ€ (userê°€ í˜¸ìŠ¤íŠ¸) |
| `authenticated_api_client` | ì¸ì¦ëœ DRF í´ë¼ì´ì–¸íŠ¸ |
| `authenticated_web_client` | ì¸ì¦ëœ Django í´ë¼ì´ì–¸íŠ¸ |

**ê° ì•±ë³„ conftest.py** - ì•± ì „ìš© fixture
- `teams/tests/conftest.py`: `milestone`, `team_with_members`, `full_team`
- `mindmaps/tests/conftest.py`: `create_mindmap()`, `create_node()` í—¬í¼ í•¨ìˆ˜
- `members/tests/conftest.py`: `todo`, `todo_with_assignee`
- ê¸°íƒ€ ì•±ë“¤...

**ê´€ë¦¬**: ê³µí†µ fixtureëŠ” [ë£¨íŠ¸](../../conftest.py), ì•± ì „ìš© fixtureëŠ” ê° ì•±ì˜ `tests/conftest.py`

### DB ìë™ ë¡¤ë°± (pytest-django)

```python
@pytest.mark.django_db  # ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìë™ ë¡¤ë°±
def test_create_team(user):
    TeamService.create_team(user, {...})
    # í…ŒìŠ¤íŠ¸ ì¢…ë£Œ í›„ ìë™ ë¡¤ë°± â†’ DB ì´ˆê¸° ìƒíƒœ ë³µì›
```

**íš¨ê³¼**: í…ŒìŠ¤íŠ¸ ê°„ ì™„ì „í•œ ê²©ë¦¬, DB ì¶©ëŒ ì—†ìŒ

---

## 7. í•™ìŠµ ë‚´ìš©

### í…ŒìŠ¤íŠ¸ êµ¬ì¶•ì„ í†µí•´ ì–»ì€ ì 

#### 1. pytest í™œìš© ëŠ¥ë ¥

**í•™ìŠµí•œ ë‚´ìš©**:
- **fixture** - í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¬ì‚¬ìš© ë° ì˜ì¡´ì„± ê´€ë¦¬
- **mark** - í…ŒìŠ¤íŠ¸ ë¶„ë¥˜ (`@pytest.mark.django_db`, `@pytest.mark.slow`)
- **parametrize** - ì—¬ëŸ¬ ì…ë ¥ê°’ìœ¼ë¡œ ë™ì¼ í…ŒìŠ¤íŠ¸

**ì‹¤ë¬´ ì ìš©**:
- fixtureë¡œ 221ê°œ í…ŒìŠ¤íŠ¸ì˜ ì¤‘ë³µ ì½”ë“œ ê°ì†Œ
- í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ ìµœì í™”

#### 2. Django í…ŒìŠ¤íŠ¸ ë„êµ¬ ì´í•´

**í•™ìŠµí•œ ë‚´ìš©**:
- **TestClient vs APIClient** - SSRì€ TestClient, APIëŠ” APIClient
- **ì¸ì¦ ìš°íšŒ ë©”ì„œë“œ**
  - `force_login(user)`: TestClient ì„¸ì…˜ ë¡œê·¸ì¸ ìŠ¤í‚µ
  - `force_authenticate(user)`: APIClient ì¸ì¦ ìŠ¤í‚µ (í† í°/JWT ì„¤ì • ë¶ˆí•„ìš”)
  - íš¨ê³¼: ë§¤ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ë¡œê·¸ì¸ API í˜¸ì¶œ ë¶ˆí•„ìš” â†’ ì†ë„ í–¥ìƒ
- **`refresh_from_db()`** - ë‹¤ë¥¸ ì½”ë“œì—ì„œ ìˆ˜ì •í•œ ê°ì²´ì˜ ìµœì‹  ìƒíƒœ ì¡°íšŒ
- **`mail.outbox`** - ì´ë©”ì¼ ì „ì†¡ í…ŒìŠ¤íŠ¸ (ì‹¤ì œ SMTP ì„œë²„ ë¶ˆí•„ìš”)

**ì‹¤ë¬´ ì ìš©**:
- API/SSR í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡°ì— ì í•©í•œ í…ŒìŠ¤íŠ¸ ì „ëµ ìˆ˜ë¦½
- ì´ë©”ì¼ ì¸ì¦ í”Œë¡œìš°ë¥¼ Mock ì—†ì´ ê²€ì¦

#### 3. ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬ì¡° ì´í•´ í–¥ìƒ

**í•™ìŠµí•œ ë‚´ìš©**:
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ HTTPì™€ ë¶„ë¦¬í•˜ëŠ” ì´ìœ 
- ì„œë¹„ìŠ¤ ë ˆì´ì–´ë¥¼ ë¨¼ì € í…ŒìŠ¤íŠ¸í•˜ë©´ API/SSR ë™ì‹œ ê²€ì¦ ê°€ëŠ¥
- DB ìƒíƒœ ê¸°ë°˜ ê²€ì¦ìœ¼ë¡œ êµ¬í˜„ ë³€ê²½ì— ê°•í•œ í…ŒìŠ¤íŠ¸ ì‘ì„±

**ì‹¤ë¬´ ì ìš©**:
- API/SSR ë¦¬íŒ©í† ë§ ì‹œ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ë§Œìœ¼ë¡œ ì•ˆì •ì„± ë³´ì¥
- ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ì„œë¹„ìŠ¤ â†’ API â†’ SSR ìˆœì„œë¡œ ê°œë°œ

#### 4. ë¦¬íŒ©í† ë§ ì•ˆì •ì„± ì¦ê°€

**íš¨ê³¼**:
- ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¦¬íŒ©í† ë§ ì‹œ **í…ŒìŠ¤íŠ¸ í†µê³¼ ì—¬ë¶€ë¡œ ì¦‰ì‹œ ê²€ì¦**
- ì½”ë“œ ë³€ê²½ í›„ **íšŒê·€ ë²„ê·¸ ì¡°ê¸° ë°œê²¬**
- ìì‹ ê° ìˆëŠ” ì½”ë“œ ê°œì„  ê°€ëŠ¥

**ì‚¬ë¡€**:
```bash
# ë¦¬íŒ©í† ë§ ì „
pytest -v  # 221 passed

# ì„œë¹„ìŠ¤ ë¡œì§ ìˆ˜ì •
# ...

# ë¦¬íŒ©í† ë§ í›„
pytest -v  # 219 passed, 2 failed â† ì¦‰ì‹œ ë°œê²¬!
```

#### 5. í…ŒìŠ¤íŠ¸ ìœ ì§€ë³´ìˆ˜ ê²½í—˜

**í•™ìŠµí•œ ë‚´ìš©**:
- **ì‹¤ì œ ì‚¬ìš© APIë§Œ í…ŒìŠ¤íŠ¸**: ë¯¸ì‚¬ìš© API í…ŒìŠ¤íŠ¸ ì œì™¸ë¡œ ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ ê°ì†Œ
- **DB ìƒíƒœ ê²€ì¦**: ì„œë¹„ìŠ¤ êµ¬í˜„ ë³€ê²½ ì‹œ í…ŒìŠ¤íŠ¸ ìˆ˜ì • ë¶ˆí•„ìš”
- **fixture ì¤‘ì•™ ê´€ë¦¬**: ê³µí†µ ì„¤ì • ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •

**ì‹¤ë¬´ ì ìš©**:
- í…ŒìŠ¤íŠ¸ ì½”ë“œ ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ìµœì†Œí™”
- ìƒˆ íŒ€ì› ì˜¨ë³´ë”© ì‹œ í…ŒìŠ¤íŠ¸ë¡œ ë¹ ë¥¸ ì´í•´ ê°€ëŠ¥

#### 6. í…ŒìŠ¤íŠ¸ê°€ ê°œë°œ ë°©ì‹ì— ì¤€ ì˜í–¥

**ë³€í™”**:
- **TDD ì ‘ê·¼**: ë³µì¡í•œ ë¡œì§ì€ í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„±
- **ì½”ë“œ í’ˆì§ˆ í–¥ìƒ**: í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ì„¤ê³„
- **ë¬¸ì„œí™” íš¨ê³¼**: í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì‚¬ìš© ì˜ˆì‹œ ì—­í• 

---

## í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest -v

# íŠ¹ì • ì•±ë§Œ
pytest teams/tests/ -v

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ
pytest -k "test_create" -v

# ì»¤ë²„ë¦¬ì§€ í™•ì¸
pytest --cov=. --cov-report=html
```

**ì‹¤í–‰ ê²°ê³¼**:
```bash
============================== test session starts ===============================
<!-- AUTO:TEST_COUNT -->
collected 249 items

accounts/tests/test_auth_service.py::TestAuthService::test_register_user âœ“
accounts/tests/test_auth_service.py::TestAuthService::test_activate_account âœ“
<!-- AUTO:TEST_COUNT -->
... (249ê°œ í…ŒìŠ¤íŠ¸)

<!-- AUTO:TEST_COUNT -->
============================== 249 passed in 142.0s ================================
```

---

**ì‘ì„±ì¼**: 2025ë…„ 12ì›” 4ì¼
**ë²„ì „**: 2.0
**í…ŒìŠ¤íŠ¸ ì‹¤í–‰**: `pytest -v`
**ì½”ë“œ ìœ„ì¹˜**: ê° ì•±ì˜ `tests/` ë””ë ‰í† ë¦¬
