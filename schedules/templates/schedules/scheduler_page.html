{% extends 'base_app.html' %} 
{% load static %} 
{% load schedule_extras %}
{% block contents %}
{% comment %} Light theme styles loaded in base_app.html {% endcomment %}
<section class="schedulesection">
  <div class="schedule-header">
    <div class="schedule-controls">
      <form method="POST" action="." class="week-selector">
        {% csrf_token %}
        <input type="week" name="week" value="{{ selected_week }}" required />
        <button type="submit">시간표 확인</button>
      </form>
      <a href="{% url 'schedules:scheduler_upload_page' team.id %}">
        <button>시간표 업로드</button>
      </a>
    </div>
  </div>
  <div class="schedule-grid">
    <!-- Time Column -->
    <div class="time-column">
      <div class="schedule-day-header">시간</div>
      {% for i in "012345678901234567890123"|make_list %}
        <div class="time-slot">
          {% if forloop.counter0 == 0 %}12:00 AM
          {% elif forloop.counter0 <= 11 %}{{ forloop.counter0|stringformat:"02d" }}:00 AM
          {% elif forloop.counter0 == 12 %}12:00 PM
          {% else %}{{ forloop.counter0|add:"-12"|stringformat:"02d" }}:00 PM
          {% endif %}
        </div>
      {% endfor %}
    </div>
    
    <!-- Schedule Columns for each day -->
    {% for schedule in schedules %}
    <div class="schedule-column" id="schedulediv{{forloop.counter}}">
      <div class="schedule-day-header">
        <div class="date-line">{{schedule.date|date:"n/j"}}</div>
        <div class="day-line">({{schedule.date|date:"D"}})</div>
      </div>
      {% for hour in "012345678901234567890123"|make_list %}
        {% with hour_int=forloop.counter0 %}
          <div class="schedule-slot availability-{{schedule.availability|lookup:hour_int}}">
            {{schedule.availability|lookup:hour_int}}
          </div>
        {% endwith %}
      {% endfor %}
    </div>
    {% endfor %}
  </div>
</section>
{% comment %} 
CSS classes now handle the availability colors automatically
No JavaScript needed for styling 
{% endcomment %}

{% endblock %}
