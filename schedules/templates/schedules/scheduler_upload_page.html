{% extends 'base_app.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/schedules/common.css' %}">
<link rel="stylesheet" href="{% static 'css/pages/schedules/scheduler_upload.css' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/pages/scheduler_upload.js' %}"></script>
{% endblock %} 

{% block contents %}
<section class="page-section schedule-upload-page">
  <div class="content-card">
    <div class="card-header">
      <a href="{% url 'schedules:scheduler_page' team.id %}" class="back-btn">
        <i class="ri-arrow-left-line"></i>
      </a>
      <h2>스케줄 업로드</h2>
      <p>나의 가능한 시간대를 선택하여 팀 스케줄에 등록하세요</p>
    </div>

    <div class="info-section">
      <div class="phase-info-section">
        <div class="phase-icon">
          <i class="ri-calendar-upload-line"></i>
        </div>
        <div class="phase-description">
          <h4>개인 스케줄 등록</h4>
          <p>가능한 시간대를 체크하면 팀원들과 함께 최적의 모임 시간을 찾을 수 있습니다.</p>
        </div>
      </div>
    </div>
    
    <form method="POST" action="." class="form-container">
      {% csrf_token %}
      
      <div class="form-group">
        <label for="week">주차 선택</label>
        <div class="input-wrapper">
          <i class="ri-calendar-2-line"></i>
          <input type="week" name="week" id="week" required>
        </div>
        <div class="help-text">
          <small>스케줄을 등록할 주차를 선택해주세요</small>
        </div>
      </div>

      <div class="schedule-grid-container">
        <h4>가능한 시간대 선택</h4>
        <p class="schedule-instruction">체크박스를 클릭하여 가능한 시간을 표시해주세요</p>
        
        <div class="schedule-grid-wrapper">
          <div class="schedule-grid">
            <!-- Time column header -->
          <div class="time-column">
            <div class="time-header">시간</div>
            {% for hour in "012345678901234567890123"|make_list %}
              <div class="time-slot">
                {% if forloop.counter0 == 0 %}12:00 AM
                {% elif forloop.counter0 < 12 %}{{ forloop.counter0|stringformat:"02d" }}:00 AM
                {% elif forloop.counter0 == 12 %}12:00 PM
                {% else %}{{ forloop.counter0|add:"-12"|stringformat:"02d" }}:00 PM
                {% endif %}
              </div>
            {% endfor %}
          </div>

          <!-- Days columns -->
          <div class="day-column">
            <div class="day-header" data-day="1">
              <div class="date-line">-/-</div>
              <div class="day-line">(월)</div>
            </div>
            {% for hour in "012345678901234567890123"|make_list %}
              <label class="schedule-slot" for="id_time_{{ forloop.counter0 }}_1">
                <input type="checkbox" 
                       name="time_{{ forloop.counter0 }}-1" 
                       id="id_time_{{ forloop.counter0 }}_1"
                       class="schedule-checkbox" />
                <span class="slot-indicator">
                  <i class="ri-check-line"></i>
                </span>
              </label>
            {% endfor %}
          </div>

          <div class="day-column">
            <div class="day-header" data-day="2">
              <div class="date-line">-/-</div>
              <div class="day-line">(화)</div>
            </div>
            {% for hour in "012345678901234567890123"|make_list %}
              <label class="schedule-slot" for="id_time_{{ forloop.counter0 }}_2">
                <input type="checkbox" 
                       name="time_{{ forloop.counter0 }}-2" 
                       id="id_time_{{ forloop.counter0 }}_2"
                       class="schedule-checkbox" />
                <span class="slot-indicator">
                  <i class="ri-check-line"></i>
                </span>
              </label>
            {% endfor %}
          </div>

          <div class="day-column">
            <div class="day-header" data-day="3">
              <div class="date-line">-/-</div>
              <div class="day-line">(수)</div>
            </div>
            {% for hour in "012345678901234567890123"|make_list %}
              <label class="schedule-slot" for="id_time_{{ forloop.counter0 }}_3">
                <input type="checkbox" 
                       name="time_{{ forloop.counter0 }}-3" 
                       id="id_time_{{ forloop.counter0 }}_3"
                       class="schedule-checkbox" />
                <span class="slot-indicator">
                  <i class="ri-check-line"></i>
                </span>
              </label>
            {% endfor %}
          </div>

          <div class="day-column">
            <div class="day-header" data-day="4">
              <div class="date-line">-/-</div>
              <div class="day-line">(목)</div>
            </div>
            {% for hour in "012345678901234567890123"|make_list %}
              <label class="schedule-slot" for="id_time_{{ forloop.counter0 }}_4">
                <input type="checkbox" 
                       name="time_{{ forloop.counter0 }}-4" 
                       id="id_time_{{ forloop.counter0 }}_4"
                       class="schedule-checkbox" />
                <span class="slot-indicator">
                  <i class="ri-check-line"></i>
                </span>
              </label>
            {% endfor %}
          </div>

          <div class="day-column">
            <div class="day-header" data-day="5">
              <div class="date-line">-/-</div>
              <div class="day-line">(금)</div>
            </div>
            {% for hour in "012345678901234567890123"|make_list %}
              <label class="schedule-slot" for="id_time_{{ forloop.counter0 }}_5">
                <input type="checkbox" 
                       name="time_{{ forloop.counter0 }}-5" 
                       id="id_time_{{ forloop.counter0 }}_5"
                       class="schedule-checkbox" />
                <span class="slot-indicator">
                  <i class="ri-check-line"></i>
                </span>
              </label>
            {% endfor %}
          </div>

          <div class="day-column">
            <div class="day-header" data-day="6">
              <div class="date-line">-/-</div>
              <div class="day-line">(토)</div>
            </div>
            {% for hour in "012345678901234567890123"|make_list %}
              <label class="schedule-slot" for="id_time_{{ forloop.counter0 }}_6">
                <input type="checkbox" 
                       name="time_{{ forloop.counter0 }}-6" 
                       id="id_time_{{ forloop.counter0 }}_6"
                       class="schedule-checkbox" />
                <span class="slot-indicator">
                  <i class="ri-check-line"></i>
                </span>
              </label>
            {% endfor %}
          </div>

          <div class="day-column">
            <div class="day-header" data-day="0">
              <div class="date-line">-/-</div>
              <div class="day-line">(일)</div>
            </div>
            {% for hour in "012345678901234567890123"|make_list %}
              <label class="schedule-slot" for="id_time_{{ forloop.counter0 }}_7">
                <input type="checkbox" 
                       name="time_{{ forloop.counter0 }}-7" 
                       id="id_time_{{ forloop.counter0 }}_7"
                       class="schedule-checkbox" />
                <span class="slot-indicator">
                  <i class="ri-check-line"></i>
                </span>
              </label>
            {% endfor %}
          </div>
          </div>
        </div>

        <!-- Quick selection tools -->
        <div class="selection-tools">
          <h5>빠른 선택 도구</h5>
          <div class="tools-grid">
            <button type="button" class="tool-btn">
              <i class="ri-check-double-line"></i>
              전체 선택
            </button>
            <button type="button" class="tool-btn">
              <i class="ri-close-line"></i>
              전체 해제
            </button>
            <button type="button" class="tool-btn">
              <i class="ri-briefcase-line"></i>
              업무시간 (9-18시)
            </button>
            <button type="button" class="tool-btn">
              <i class="ri-moon-line"></i>
              저녁시간 (18-22시)
            </button>
            <button type="button" class="tool-btn">
              <i class="ri-calendar-check-line"></i>
              평일만
            </button>
            <button type="button" class="tool-btn">
              <i class="ri-calendar-2-line"></i>
              주말만
            </button>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="create-btn">
          <i class="ri-upload-line"></i>
          스케줄 업로드
        </button>
        <a href="{% url 'schedules:scheduler_page' team.id %}" class="cancel-btn">
          <i class="ri-close-line"></i>
          취소
        </a>
      </div>
    </form>
  </div>
</section>

{% endblock %}