{% extends "base_app.html" %} {% load static %} {% block mobileView %}
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
{% endblock %}

<!--<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
-->
<script src="{% static 'js/summernote/summernote.js' %}"></script>
<link
  rel="stylesheet"
  href="{% static 'css/vendors/summernote/summernote.css' %}"
  type="text/css"
/>
<script
  type="text/javascript"
  src="/static/js/lang/summernote-ko-KR.js"
></script>

{% block summernote %}
<script type="text/javascript">
  $(document).ready(function () {
    $("#id_content").summernote({
      placeholder: "내용을 입력해주세요.",
      height: 500,
      minHeight: 500,
      maxHeight: 500,
      lang: "ko-KR",
      toolbar: [
        ["style", ["style"]],
        ["font", ["bold", "underline", "clear"]],
        ["color", ["color"]],
        ["para", ["ul", "ol", "paragraph"]],
        ["table", ["table"]],
        ["insert", ["link", "picture", "video"]],
        ["view", ["fullscreen", "help"]],
      ],
    });
    $("p").css("margin-bottom", "0");
    $(".note-resizebar").css("display", "none");
  });
</script>

<link
  rel="stylesheet"
  href="{% static 'css/users/checkbox.css' %}"
  type="text/css"
/>


{% endblock %} {% block contents %} {% load static %}
{% comment %} Light theme styles loaded in base_app.html {% endcomment %}
<section class="post-write-section">
  <div class="shares-header">
    <h1>공유 게시글 {% if edit %}수정{% else %}작성{% endif %}</h1>
  </div>
  
  <form action="" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="write-form-card">
      <div class="write-form-header">
        {{ form.title.as_widget }}
      </div>
      
      <div class="write-form-body content-editor">
        {{ form.article }}
      </div>
      
      <div class="write-form-footer">
        <div class="file-upload-section">
          {{ form.upload_files }}
          <small style="color: var(--text-muted); font-size: 0.875rem; margin-top: 0.5rem; display: block;">
            <i class="fas fa-upload"></i>&nbsp;파일 업로드: 10MB 이하의 파일만 첨부 가능합니다. 여러 파일은 압축해서 업로드해주세요.
          </small>
        </div>
        
        <div class="write-actions">
          <button type="submit" class="submit-btn">
            {% if edit %}{{ edit }}{% else %}작성하기{% endif %}
          </button>
        </div>
      </div>
    </div>
  </form>
</section>
{% endblock %} {% block script %}
<script type="text/javascript">
  var checkUnload = true;
  $(window).on("beforeunload", function () {
    if (checkUnload)
      return "이 페이지를 벗어나면 작성된 내용은 저장되지 않습니다.";
  });
  $("#write").on("click", function () {
    checkUnload = false;
    $("submit").submit();
  });
</script>

{% endblock %}
