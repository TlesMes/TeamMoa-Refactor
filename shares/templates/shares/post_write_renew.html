{% extends "base_app.html" %} {% load static %}

{% block mobileView %}
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/base/variables.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/vendors/summernote/summernote.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/pages/shares/post_write.css' %}" type="text/css" />
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/summernote/summernote.js' %}"></script>
<script type="text/javascript" src="/static/js/lang/summernote-ko-KR.js"></script>
<script src="{% static 'js/pages/post_write.js' %}"></script>
{% endblock %} {% block contents %} {% load static %}
{% comment %} Light theme styles loaded in base_app.html {% endcomment %}
<section class="post-write-section">
  <div class="write-header">
    <a href="{% url 'shares:post_list' team.id %}" class="write-back-btn">
      <i class="ri-arrow-left-line"></i>
    </a>
    <h1>공유 게시글 {% if edit %}수정{% else %}작성{% endif %}</h1>
  </div>
  
  <form action="" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="write-form-card">
      <div class="write-form-header">
        {{ form.title.as_widget }}
      </div>
      
      <div class="write-form-body content-editor">
        {{ form.article }}
      </div>
      
      <div class="write-form-footer">
        <div class="file-upload-section">
          {% if form.instance.upload_files %}
            <div class="current-file-info">
              <label class="post-write__form-label">
                <i class="fas fa-paperclip"></i>&nbsp;현재 첨부파일:
              </label>
              <div class="current-file-box">
                <a href="{% url 'shares:post_download' team.id form.instance.id %}">
                  <i class="fas fa-file"></i>&nbsp;{{ form.instance.filename|default:"첨부파일" }}
                  <i class="fas fa-download"></i>
                </a>
              </div>
            </div>
            <label class="post-write__form-label">
              <i class="fas fa-edit"></i>&nbsp;파일 변경:
            </label>
            <input type="file" name="upload_files" id="id_upload_files" class="post-write__file-input">
          {% else %}
            <label class="post-write__form-label">
              <i class="fas fa-upload"></i>&nbsp;파일 선택:
            </label>
            <input type="file" name="upload_files" id="id_upload_files" class="post-write__file-input">
          {% endif %}
          <small class="post-write__help-text">
            <i class="fas fa-upload"></i>&nbsp;파일 업로드: 10MB 이하의 파일만 첨부 가능합니다. 여러 파일은 압축해서 업로드해주세요.
          </small>
        </div>
        
        <div class="write-actions">
          <button type="submit" class="submit-btn">
            {% if edit %}{{ edit }}{% else %}작성하기{% endif %}
          </button>
        </div>
      </div>
    </div>
  </form>
</section>
{% endblock %}
